<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Renderowanie obrazu 3D</title>
    <link rel="stylesheet" href="default.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-typescript.js"></script>
    <script async="" src="main.js" type="module"></script>
</head>
<!-- TODO: dopuszczanie pojedynczych pustych linii -->
<!-- TODO: wielojęzyczne komentarze -->
<body>
    <aside class="collapsed">
        <div class="buttons">
            <div><a href="https://github.com/pawel-stepnowski/articles-pl"><i class="fa fa-home" aria-hidden="true"></i></a></div>
            <div class="menu"><i class="fa fa-bars" aria-hidden="true"></i></div>
        </div>
        <nav>
            <ul><li><a href="#introduction">Wstęp</a></li><li><a href="#pixel_manipulation">Manipulacja obrazem na poziomie pikseli</a></li><li><a href="#linear_algebra_elementaries">Elementaria algebry liniowej</a><ul><li><a href="#linear_algebra_elementaries__matrix">Macierz</a></li><li><a href="#linear_algebra_elementaries__vector">Wektor</a></li><li><a href="#linear_algebra_elementaries__multiplication">Mnożenie macierzy</a></li><li><a href="#linear_algebra_elementaries__identity">Macierz tożsamościowa</a></li></ul></li><li><a href="#linear_algebra_map">Wybrane odwzorowania liniowe</a><ul><li><a href="#linear_algebra_map__rotation">Obrót</a></li><li><a href="#linear_algebra_map__rotation_with_matrix">Obrót przy użyciu macierzy</a></li><li><a href="#linear_algebra_map__translation">Przesunięcie</a></li><li><a href="#linear_algebra_map__combining">Łączenie odwzorowań</a></li></ul></li><li><a href="#projection">Rzutowanie</a><ul><li><a href="#projection__perspective_divide">Dzielenie perspektywiczne</a></li><li><a href="#projection__homogeneous_coordinates">Współrzędne jednorodne</a></li><li><a href="#projection__simple_matrix">Prosta macierz projekcji</a></li><li><a href="#projection__matrix">Macierz projekcji</a><ul><li><a href="#projection__matrix__x">Obliczanie 𝑥′</a></li><li><a href="#projection__matrix__y">Obliczanie 𝑦′</a></li><li><a href="#projection__matrix__z">Obliczanie 𝑧′</a></li><li><a href="#projection__matrix__w">Obliczanie 𝑤′</a></li><li><a href="#projection__matrix__summary">Konstrukcja macierzy końcowa</a></li></ul></li></ul></li><li><a href="#triangle_rasterization">Rasteryzacja</a><ul><li><a href="#triangle_rasterization__barycentric">Współrzędne barycentryczne</a></li><li><a href="#triangle_rasterization__traversal">Trawersowanie trójkąta</a></li><li><a href="#triangle_rasterization__example">Przykład rasteryzacji</a></li></ul></li><li><a href="#rendering">Proces renderowania</a><ul><li><a href="#rendering__description">Opis procesu</a><ul><li><a href="#rendering__description__parameters">Parametry procesu</a></li><li><a href="#rendering__description__flow">Przebieg procesu</a></li></ul></li><li><a href="#rendering__case">Przykład użycia</a><ul><li><a href="#rendering__case__input">Dane wejściowe</a></li><li><a href="#rendering__case__uniforms">Uniforms</a></li><li><a href="#rendering__case__vertex">Vertex Shader</a></li><li><a href="#rendering__case__rasterization">Rasteryzacja i Fragment Shader</a></li><li><a href="#rendering__rendering">Renderowanie</a></li></ul></li></ul></li><li><a href="#appendix_a">Dodatek A. Demo</a></li><li><a href="#appendix_b">Dodatek B. WebGL</a></li></ul>
        </nav>
    </aside>
    <main>
        <article>
            <h1>Renderowanie obrazu 3D</h1>
            <hr>
            <section id="introduction">
                <h2>Wstęp</h2>
                <p>Niniejszy artykuł ma na celu wprowadzenie w proces renderowania grafiki 3D, przedstawiając krok po kroku, jak stworzyć prosty silnik graficzny. Wszystkie omawiane techniki bazują na architekturze współczesnych potoków renderowania, ale w wersji uproszczonej, by zrozumieć ich istotę i zasadę działania.</p>
                <p>Zakładam, że czytelnik potrafi programować, ale niekoniecznie zna zagadnienia związane z grafiką 3D i stojącą za nią matematyką. Zgodnie z filozofią "0 dependencies", artykuł nie wymaga sięgania po zewnętrzne źródła – wszystko, co niezbędne do implementacji, znajdziesz tutaj. Poznasz podstawy algebry liniowej, proces rzutowania, transformacji, rasteryzacji oraz łączenia tych elementów w działającą całość.</p>
            </section>
            <hr>
            <section id="pixel_manipulation">
                <h2>Manipulacja obrazem na poziomie pikseli</h2>
                <p>Celem tego artykułu jest implementacja w języku JavaScript procesu generowania obrazu 3D, piksel po pikselu. W JavaScript istnieje możliwość manipulacji obrazem na poziomie pojedynczych pikseli. Umożliwia to element dokumentu HTML <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/canvas">&lt;canvas&gt;</a> nazywany płótnem.</p>
                <p>W pierwszej kolejności należy uzyskać kontekst graficzny płótna:</p>
                <code class="language-typescript">const context = canvas_element.getContext('2d')</code>
                <p>Kontekst umożliwia dostęp do interfejsu programistycznego – <a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API">Canvas API</a> –  który zawiera szereg funkcji graficznych. Na przykład funkcję rysowania linii i kształtów. W tym artykule interesuje nas jedynie bezpośrednia manipulacja pikselami. W tym celu pobieramy strukturę danych zawierającą tablicę bajtów przechowującą wartości RGBA kolejnych pikseli:</p>
                <code class="language-typescript">const image = context.getImageData(0, 0, context.canvas.width, context.canvas.height);</code>
                <p>Każde kolejne 4 bajty w tablicy <code>image.data</code> reprezentują wartość RGBA pojedynczego piksela. Tablicę tą możemy dowolnie modyfikować. Po wypełnieniu tablicy pożądanymi wartościami przekazujemy ją spowrotem na płótno:</p>
                <code class="language-typescript">context.putImageData(image, 0, 0);</code>
                <p>Poniższy program prezentuje manipulację kolorami pikseli. Wartość czerwieni zależy od położenia na osi 𝖷. Wartość zieleni zależna jest od osi 𝖸. Natomiast wartość koloru niebieskiego zależy od obu osi. Wartość alpha jest ustawiany na 255 co oznacza całkowity brak przeźroczystości.</p>
                <div class="code-with-output">
                    <div class="content-generated-from-code" module="pixel_manipulation" function="example1" output=":parent canvas" style="height: 33em;"></div>
                    <div><canvas width="400" height="400"></canvas></div>
                </div>
            </section>
            <hr>
            <section id="linear_algebra_elementaries">
                <h2>Elementaria algebry liniowej</h2>
                <p>W tym rozdziale opisano elementarne struktury i operacje algebry liniowej wykorzystywane w tym artykule. Większość tematów jest omawiana znacznie szerzej w programach każdych studiów technicznych, dlatego większość czytelników może ten rozdział pominąć.</p>
                <p>
                    <span>Nie wszystkie metody zostały opisane. Wiele metod pomocniczych lub oczywistych zostało pominiętych. Kompletny kod znajduje się w plikach źródłowych:</span>
                    <span>
                        <a class="repository-file" href="https://github.com/pawel-stepnowski/rendering/tree/main/js/math/Matrix.js"><i class="fa fa-file-o" aria-hidden="true"></i><span>Matrix.js</span></a>,
                        <a class="repository-file" href="https://github.com/pawel-stepnowski/rendering/tree/main/js/math/Matrix2.js"><i class="fa fa-file-o" aria-hidden="true"></i><span>Matrix2.js</span></a>,
                        <a class="repository-file" href="https://github.com/pawel-stepnowski/rendering/tree/main/js/math/Matrix3.js"><i class="fa fa-file-o" aria-hidden="true"></i><span>Matrix3.js</span></a>,
                        <a class="repository-file" href="https://github.com/pawel-stepnowski/rendering/tree/main/js/math/Matrix4.js"><i class="fa fa-file-o" aria-hidden="true"></i><span>Matrix4.js</span></a>,
                        <a class="repository-file" href="https://github.com/pawel-stepnowski/rendering/tree/main/js/math/Vector.js"><i class="fa fa-file-o" aria-hidden="true"></i><span>Vector.js</span></a>,
                        <a class="repository-file" href="https://github.com/pawel-stepnowski/rendering/tree/main/js/math/Vector2.js"><i class="fa fa-file-o" aria-hidden="true"></i><span>Vector2.js</span></a>,
                        <a class="repository-file" href="https://github.com/pawel-stepnowski/rendering/tree/main/js/math/Vector3.js"><i class="fa fa-file-o" aria-hidden="true"></i><span>Vector3.js</span></a>,
                        <a class="repository-file" href="https://github.com/pawel-stepnowski/rendering/tree/main/js/math/Vector4.js"><i class="fa fa-file-o" aria-hidden="true"></i><span>Vector4.js</span></a>.
                    </span>
                    <span>Wszyskie wymienione pliki znajdują się w folderze repozytorium pod adresem</span>
                    <a class="repository-file" href="https://github.com/pawel-stepnowski/rendering/tree/main/js/math/"><span>https://github.com/pawel-stepnowski/rendering/tree/main/js/math</span></a>.
                </p>
                <section id="linear_algebra_elementaries__matrix">
                    <h3>Macierz</h3>
                    <p>Macierz o wymiarach 𝑚 × 𝑛 definiujemy jako zbiór wartości uporządkowanych w 𝑚 kolumnach i 𝑛 wierszach:</p>
                    <math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\left[\begin{array}{cc} a_{11} &amp; a_{21} &amp; \cdots &amp; a_{m1} \\ a_{12} &amp; a_{22} &amp; \cdots &amp; a_{m2} \\ \vdots &amp; \vdots &amp; \ddots &amp; \vdots \\ a_{1n} &amp; a_{2n} &amp; \cdots &amp; a_{mn} \\ \end{array}\right]" display="block"><mrow data-mjx-texclass="INNER" data-latex-item="\left[\begin{array}{cc} a_{11} &amp; a_{21} &amp; \cdots &amp; a_{m1} \\ a_{12} &amp; a_{22} &amp; \cdots &amp; a_{m2} \\ \vdots &amp; \vdots &amp; \ddots &amp; \vdots \\ a_{1n} &amp; a_{2n} &amp; \cdots &amp; a_{mn} \\ \end{array}\right]" data-latex="\left[\begin{array}{cc} a_{11} &amp; a_{21} &amp; \cdots &amp; a_{m1} \\ a_{12} &amp; a_{22} &amp; \cdots &amp; a_{m2} \\ \vdots &amp; \vdots &amp; \ddots &amp; \vdots \\ a_{1n} &amp; a_{2n} &amp; \cdots &amp; a_{mn} \\ \end{array}\right]"><mo data-mjx-texclass="OPEN" data-latex-item="\left[" data-latex="\left[">[</mo><mtable columnspacing="1em" rowspacing="4pt" columnalign="center center" data-frame-styles="" framespacing=".5em .125em" data-latex-item="{array}" data-latex="{array}"><mtr data-latex-item="{cc}" data-latex="{cc}"><mtd><msub data-latex="a_{1}"><mi data-latex="a">a</mi><mrow data-mjx-texclass="ORD" data-latex="{1}"><mn data-latex="1">11</mn></mrow></msub></mtd><mtd><msub data-latex="a_{1}"><mi data-latex="a">a</mi><mrow data-mjx-texclass="ORD" data-latex="{1}"><mn data-latex="1">21</mn></mrow></msub></mtd><mtd><mo data-latex="\cdots">⋯</mo></mtd><mtd><msub data-latex="a_{m1}"><mi data-latex="a">a</mi><mrow data-mjx-texclass="ORD" data-latex="{m1}"><mi data-latex="m">m</mi><mo>⁢</mo><mn data-latex="1">1</mn></mrow></msub></mtd></mtr><mtr data-latex-item="{cc}" data-latex="{cc}"><mtd><msub data-latex="a_{2}"><mi data-latex="a">a</mi><mrow data-mjx-texclass="ORD" data-latex="{2}"><mn data-latex="2">12</mn></mrow></msub></mtd><mtd><msub data-latex="a_{2}"><mi data-latex="a">a</mi><mrow data-mjx-texclass="ORD" data-latex="{2}"><mn data-latex="2">22</mn></mrow></msub></mtd><mtd><mo data-latex="\cdots">⋯</mo></mtd><mtd><msub data-latex="a_{m2}"><mi data-latex="a">a</mi><mrow data-mjx-texclass="ORD" data-latex="{m2}"><mi data-latex="m">m</mi><mo>⁢</mo><mn data-latex="2">2</mn></mrow></msub></mtd></mtr><mtr data-latex-item="{cc}" data-latex="{cc}"><mtd><mrow data-mjx-texclass="ORD"><mo data-latex="\vdots">⋮</mo></mrow></mtd><mtd><mrow data-mjx-texclass="ORD"><mo data-latex="\vdots">⋮</mo></mrow></mtd><mtd><mo data-latex="\ddots">⋱</mo></mtd><mtd><mrow data-mjx-texclass="ORD"><mo data-latex="\vdots">⋮</mo></mrow></mtd></mtr><mtr data-latex-item="{cc}" data-latex="{cc}"><mtd><msub data-latex="a_{1n}"><mi data-latex="a">a</mi><mrow data-mjx-texclass="ORD" data-latex="{1n}"><mn data-latex="1">1</mn><mo>⁢</mo><mi data-latex="n">n</mi></mrow></msub></mtd><mtd><msub data-latex="a_{2n}"><mi data-latex="a">a</mi><mrow data-mjx-texclass="ORD" data-latex="{2n}"><mn data-latex="2">2</mn><mo>⁢</mo><mi data-latex="n">n</mi></mrow></msub></mtd><mtd><mo data-latex="\cdots">⋯</mo></mtd><mtd><msub data-latex="a_{m n}"><mi data-latex="a">a</mi><mrow data-mjx-texclass="ORD" data-latex="{m n}"><mi data-latex="m">m</mi><mo>⁢</mo><mi data-latex="n">n</mi></mrow></msub></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE" data-latex-item="\right]" data-latex="\right]">]</mo></mrow></math>
                    <p>W przedstawionej implementacji macierz jest reprezentowana jako tablica tablic.</p>
                    <p>Kod struktur matematycznych oraz całej prezentowanej implementacji oparty jest na silnym typowaniu. Konfigurację kontroli typów można znaleźć w pliku 
                        <a href="https://github.com/pawel-stepnowski/rendering/tree/main/jsconfig.json" class="repository-file"><i class="fa fa-file-o" aria-hidden="true"></i> jsconfig.json</a>. 
                        W szczególności implementacja struktur matematycznych posługuje się definicjami typów zawartymi w pliku 
                        <a href="https://github.com/pawel-stepnowski/rendering/tree/main/js/math/types.d.ts" class="repository-file"><i class="fa fa-file-o" aria-hidden="true"></i> types.d.ts</a>, które przedstawiono poniżej:
                    </p>
                    <div class="content-generated-from-code" module="math_types" style="height: 30em;"></div>
                    <p>Powyższe struktury matematyczne wykorzystują następującą definicję typu tablicy o stałym rozmiarze:</p>
                    <pre><code class="language-typescript">type FixedArray&lt;T, N extends number&gt; = [T, ...T[]] &amp; { length: N }</code></pre>
                    <p>Kod metody <code>createZero(m, n)</code> tworzącej macierz zerową:</p>
                    <div class="content-generated-from-code" module="matrix" function="Matrix.createZero" style="height: 26em;"></div>
                    <p>Kod metod <code>create(n, initializer)</code> i <code>createZero(n)</code> tworzących tablice o stałym rozmiarze, wykorzytywane przy tworzeniu macierzy:</p>
                    <div class="content-generated-from-code" module="fixed_array" function="FixedArray.create,createZero" style="height: 45em;"></div>
                </section>
                <section id="linear_algebra_elementaries__vector">
                    <h3>Wektor</h3>
                    <p>Wektor o rozmiarze 𝑛 jest szczególnym przypadkiem macierzy o wymiarach 𝟣 × 𝑛.</p>
                    <math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\begin{bmatrix} m_{11} \\ m_{12} \\ \vdots \\ m_{1n} \end{bmatrix}" display="block"><mrow data-mjx-texclass="INNER" data-latex-item="{bmatrix}" data-latex="\begin{bmatrix} m_{11} \\ m_{12} \\ \vdots \\ m_{1n} \end{bmatrix}"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><msub data-latex="m_{1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{1}"><mn data-latex="1">11</mn></mrow></msub></mtd></mtr><mtr><mtd><msub data-latex="m_{2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{2}"><mn data-latex="2">12</mn></mrow></msub></mtd></mtr><mtr><mtd><mrow data-mjx-texclass="ORD"><mo data-latex="\vdots">⋮</mo></mrow></mtd></mtr><mtr><mtd><msub data-latex="m_{1n}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{1n}"><mn data-latex="1">1</mn><mo>⁢</mo><mi data-latex="n">n</mi></mrow></msub></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow></math>
                    <p>W implementacji wektor jest reprezentowany jako tablica jednowymiarowa, co zwiększa wygodę programowania. Kod metody <code>createZero(n)</code> tworzącej wektor zerowy:</p>
                    <div class="content-generated-from-code" module="vector" function="Vector.createZero" style="height: 23em;"></div>
                </section>
                <section id="linear_algebra_elementaries__multiplication">
                    <h3>Mnożenie macierzy</h3>
                    <p>Mnożenie macierzy 𝐴 o wymiarach 𝑚 × 𝑝 przez macierz 𝐵 o wymiarach 𝑝 × 𝑛 daje macierz 𝐶 o rozmiarze 𝑚 × 𝑛. Elementy wynikowej macierzy są obliczane według następującego wzoru:</p>
                    <math xmlns="http://www.w3.org/1998/Math/MathML" data-latex=" C_{ij}=\sum_{k=1}^{p} A_{ik} \cdot B_{kj}" display="block"><msub data-latex="C_{i j}"><mi data-latex="C">C</mi><mrow data-mjx-texclass="ORD" data-latex="{i j}"><mi data-latex="i">i</mi><mo>⁢</mo><mi data-latex="j">j</mi></mrow></msub><mo data-latex="=">=</mo><mrow><mrow><munderover data-latex="\sum_{k=1}^{p}"><mo data-latex="\sum">∑</mo><mrow data-mjx-texclass="ORD" data-latex="{k=1}"><mi data-latex="k">k</mi><mo data-latex="=">=</mo><mn data-latex="1">1</mn></mrow><mrow data-mjx-texclass="ORD" data-latex="{p}"><mi data-latex="p">p</mi></mrow></munderover><msub data-latex="A_{i k}"><mi data-latex="A">A</mi><mrow data-mjx-texclass="ORD" data-latex="{i k}"><mi data-latex="i">i</mi><mo>⁢</mo><mi data-latex="k">k</mi></mrow></msub></mrow><mo data-latex="\cdot">⋅</mo><msub data-latex="B_{k j}"><mi data-latex="B">B</mi><mrow data-mjx-texclass="ORD" data-latex="{k j}"><mi data-latex="k">k</mi><mo>⁢</mo><mi data-latex="j">j</mi></mrow></msub></mrow></math>
                    <p>Kod metody <code>mul(a, b)</code> realizującej mnożenie macierzy:</p>
                    <div class="content-generated-from-code" module="matrix" function="Matrix.mul" style="height: 42em;"></div>
                </section>
                <section id="linear_algebra_elementaries__identity">
                    <h3>Macierz tożsamościowa</h3>
                    <p>Macierz tożsamościowa to macierz kwadratowa, która przemnożona przez dowolny wektor zwraca ten sam wektor. Elementy macierzy tożsamościowej wynoszą 𝟣 na przekątnej i 𝟢 w pozostałych miejscach. Przykład mnożenia wektora przez macierz tożsamościową:</p>
                    <math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><mn>1</mn></mtd><mtd><mn>0</mn></mtd><mtd><mn>0</mn></mtd></mtr><mtr><mtd><mn>0</mn></mtd><mtd><mn>1</mn></mtd><mtd><mn>0</mn></mtd></mtr><mtr><mtd><mn>0</mn></mtd><mtd><mn>0</mn></mtd><mtd><mn>1</mn></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow><mo>⋅</mo><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><mi>x</mi></mtd></mtr><mtr><mtd><mi>y</mi></mtd></mtr><mtr><mtd><mi>z</mi></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow><mo>=</mo><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><mi>x</mi><mo>⋅</mo><mn>1</mn><mo>+</mo><mi>y</mi><mo>⋅</mo><mn>0</mn><mo>+</mo><mi>z</mi><mo>⋅</mo><mn>0</mn></mtd></mtr><mtr><mtd><mi>x</mi><mo>⋅</mo><mn>0</mn><mo>+</mo><mi>y</mi><mo>⋅</mo><mn>1</mn><mo>+</mo><mi>z</mi><mo>⋅</mo><mn>0</mn></mtd></mtr><mtr><mtd><mi>x</mi><mo>⋅</mo><mn>0</mn><mo>+</mo><mi>y</mi><mo>⋅</mo><mn>0</mn><mo>+</mo><mi>z</mi><mo>⋅</mo><mn>1</mn></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow><mo>=</mo><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><mi>x</mi></mtd></mtr><mtr><mtd><mi>y</mi></mtd></mtr><mtr><mtd><mi>z</mi></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow></math>
                    <p>W dalszej części artykułu niektóre macierze przekształceń będą często konstruowane na bazie macierzy tożsamościowej.</p>
                </section>
            </section>
            <hr>
            <section id="linear_algebra_map">
                <h2>Wybrane odwzorowania liniowe</h2>
                <p>Odwzorowania liniowe w kontekście tego artykułu to przekształcenia przestrzeni, które można wyrazić w postaci mnożenia macierzy przez wektory, które skutkują zmianą współrzędnych tego wektora w przestrzeni.</p>
                <p>W przykładach ilustrujących odworowania liniowe wykorzystano klasę pomocniczą <a class="repository-file" href="https://github.com/pawel-stepnowski/rendering/tree/main/js/utilities/math/PlaneCanvas.js"><i class="fa fa-file-o" aria-hidden="true"></i><span>PlaneCanvas</span></a>, która nie jest częścią opisywanej implementacji. Należy jedynie zaznaczyć, że nie realizuje ona rysowania figur za pomocą bezpośredniej manipulacji pikselami, ale wykorzystuje funkcje Canvas API do rysowania odcinków.</p>
                <section id="linear_algebra_map__rotation">
                    <h3>Obrót</h3>
                    <p>Wzór na obrót punktu <math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="(x, y)"><mo data-latex="(" stretchy="false">(</mo><mrow><mi data-latex="x">x</mi><mo data-latex=",">,</mo><mi data-latex="y">y</mi></mrow><mo data-latex=")" stretchy="false">)</mo></math> wokół środka układu współrzędnych, kąt 𝛼:</p>
                    <math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mrow><msup><mi>x</mi><mo lspace="0em" rspace="0em" class="tml-prime">′</mo></msup><mo>=</mo><mi>x</mi><mo>·</mo><mi>cos</mi><mi>α</mi><mo>−</mo><mi>y</mi><mo>·</mo><mi>sin</mi><mi>α</mi></mrow></math>
                    <math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mrow><msup><mi>y</mi><mo lspace="0em" rspace="0em" class="tml-prime">′</mo></msup><mo>=</mo><mi>x</mi><mo>·</mo><mi>sin</mi><mi>α</mi><mo>+</mo><mi>y</mi><mo>·</mo><mi>cos</mi><mi>α</mi></mrow></math>
                    <p>Kod funkcji <code>rotate</code> realizującej obrót punktu zgodnie z powyższym wzorem:</p>
                    <div class="content-generated-from-code" module="linear_map" function="rotate" style="height: 23em;"></div>
                    <p>Przykład wykorzystania funkcji <code>rotate</code> do obrotu trójkąta:</p>
                    <div class="code-with-output">
                        <div class="content-generated-from-code" module="linear_map" function="exampleRotation" output=":parent canvas" style="height: 12em;"></div>
                        <div><canvas width="400" height="400"></canvas></div>
                    </div>
                </section>
                <section id="linear_algebra_map__rotation_with_matrix">
                    <h3>Obrót przy użyciu macierzy</h3>
                    <p>Obrót punktu można zrealizować przez przemnożenie macierzy o wymiarach 𝟸 × 𝟸 przez wektor 𝟸-elementowy:</p>
                    <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\begin{bmatrix} m_{11} &amp; m_{21} \\ m_{12} &amp; m_{22} \end{bmatrix} \cdot \begin{bmatrix} x \\ y \end{bmatrix}=\begin{bmatrix} x' \\ y' \end{bmatrix}" display="block"><mrow><mrow data-mjx-texclass="INNER" data-latex-item="{bmatrix}" data-latex="{bmatrix}"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><msub data-latex="m_{1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{1}"><mn data-latex="1">11</mn></mrow></msub></mtd><mtd><msub data-latex="m_{1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{1}"><mn data-latex="1">21</mn></mrow></msub></mtd></mtr><mtr><mtd><msub data-latex="m_{2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{2}"><mn data-latex="2">12</mn></mrow></msub></mtd><mtd><msub data-latex="m_{2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{2}"><mn data-latex="2">22</mn></mrow></msub></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow><mo data-latex="\cdot">⋅</mo><mrow data-mjx-texclass="INNER" data-latex-item="{bmatrix}" data-latex="{bmatrix}"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><mi data-latex="x">x</mi></mtd></mtr><mtr><mtd><mi data-latex="y">y</mi></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow></mrow><mo data-latex="=">=</mo><mrow data-mjx-texclass="INNER" data-latex-item="{bmatrix}" data-latex="{bmatrix}"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><msup><mi data-latex="x">x</mi><mo data-mjx-alternate="1">′</mo></msup></mtd></mtr><mtr><mtd><msup><mi data-latex="y">y</mi><mo data-mjx-alternate="1">′</mo></msup></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow></math></p>
                    <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="x'=x \cdot m_{11} + y \cdot m_{21}" display="block"><msup><mi data-latex="x">x</mi><mo data-mjx-alternate="1">′</mo></msup><mo data-latex="=">=</mo><mrow><mrow><mi data-latex="x">x</mi><mo data-latex="\cdot">⋅</mo><msub data-latex="m_{1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{1}"><mn data-latex="1">11</mn></mrow></msub></mrow><mo data-latex="+">+</mo><mrow><mi data-latex="y">y</mi><mo data-latex="\cdot">⋅</mo><msub data-latex="m_{1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{1}"><mn data-latex="1">21</mn></mrow></msub></mrow></mrow></math></p>
                    <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="y'=x \cdot m_{12} + y \cdot m_{22}" display="block"><msup><mi data-latex="y">y</mi><mo data-mjx-alternate="1">′</mo></msup><mo data-latex="=">=</mo><mrow><mrow><mi data-latex="x">x</mi><mo data-latex="\cdot">⋅</mo><msub data-latex="m_{2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{2}"><mn data-latex="2">12</mn></mrow></msub></mrow><mo data-latex="+">+</mo><mrow><mi data-latex="y">y</mi><mo data-latex="\cdot">⋅</mo><msub data-latex="m_{2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{2}"><mn data-latex="2">22</mn></mrow></msub></mrow></mrow></math></p>
                    <p>
                        <span>Przy odpowiednim podstawieniu wartości pod</span>
                        <math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="m_{11}, m_{21}, m_{12}, m_{22}"><msub data-latex="m_{1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{1}"><mn data-latex="1">11</mn></mrow></msub><mo data-latex=",">,</mo><msub data-latex="m_{1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{1}"><mn data-latex="1">21</mn></mrow></msub><mo data-latex=",">,</mo><msub data-latex="m_{2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{2}"><mn data-latex="2">12</mn></mrow></msub><mo data-latex=",">,</mo><msub data-latex="m_{2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{2}"><mn data-latex="2">22</mn></mrow></msub></math>
                        <span>, otrzymujemy macierz obrotu:</span>
                    </p>
                    <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\begin{bmatrix} \cos \alpha &amp; - \sin \alpha \\ \sin \alpha &amp; \cos \alpha \end{bmatrix} \cdot \begin{bmatrix} x \\ y \end{bmatrix}=\begin{bmatrix} x \cdot \cos \alpha - y \cdot \sin \alpha \\ x \cdot \sin \alpha + y \cdot \cos \alpha \end{bmatrix}" display="block"><mrow><mrow data-mjx-texclass="INNER" data-latex-item="{bmatrix}" data-latex="{bmatrix}"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><mrow><mi data-latex="\cos">cos</mi><mo data-mjx-texclass="NONE">⁡</mo><mi data-latex="\alpha">α</mi></mrow></mtd><mtd><mrow><mo data-latex="-">−</mo><mrow><mi data-latex="\sin">sin</mi><mo data-mjx-texclass="NONE">⁡</mo><mi data-latex="\alpha">α</mi></mrow></mrow></mtd></mtr><mtr><mtd><mrow><mi data-latex="\sin">sin</mi><mo data-mjx-texclass="NONE">⁡</mo><mi data-latex="\alpha">α</mi></mrow></mtd><mtd><mrow><mi data-latex="\cos">cos</mi><mo data-mjx-texclass="NONE">⁡</mo><mi data-latex="\alpha">α</mi></mrow></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow><mo data-latex="\cdot">⋅</mo><mrow data-mjx-texclass="INNER" data-latex-item="{bmatrix}" data-latex="{bmatrix}"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><mi data-latex="x">x</mi></mtd></mtr><mtr><mtd><mi data-latex="y">y</mi></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow></mrow><mo data-latex="=">=</mo><mrow data-mjx-texclass="INNER" data-latex-item="{bmatrix}" data-latex="{bmatrix}"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><mrow><mrow><mi data-latex="x">x</mi><mo data-latex="\cdot">⋅</mo><mrow><mi data-latex="\cos">cos</mi><mo data-mjx-texclass="NONE">⁡</mo><mi data-latex="\alpha">α</mi></mrow></mrow><mo data-latex="-">−</mo><mrow><mi data-latex="y">y</mi><mo data-latex="\cdot">⋅</mo><mrow><mi data-latex="\sin">sin</mi><mo data-mjx-texclass="NONE">⁡</mo><mi data-latex="\alpha">α</mi></mrow></mrow></mrow></mtd></mtr><mtr><mtd><mrow><mrow><mi data-latex="x">x</mi><mo data-latex="\cdot">⋅</mo><mrow><mi data-latex="\sin">sin</mi><mo data-mjx-texclass="NONE">⁡</mo><mi data-latex="\alpha">α</mi></mrow></mrow><mo data-latex="+">+</mo><mrow><mi data-latex="y">y</mi><mo data-latex="\cdot">⋅</mo><mrow><mi data-latex="\cos">cos</mi><mo data-mjx-texclass="NONE">⁡</mo><mi data-latex="\alpha">α</mi></mrow></mrow></mrow></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow></math></p>
                    <p>Kod metody <code>Matrix2.createRotation</code>, która zwraca macierz obrotu dla zadanego kąta:</p>
                    <div class="content-generated-from-code" module="matrix2" function="Matrix2.createRotation" style="height: 30em;"></div>
                    <p>Przykład wykorzystania macierzy do obrotu trójkąta:</p>
                    <div class="code-with-output">
                        <div class="content-generated-from-code" module="linear_map" function="exampleMatrixRotation" output=":parent canvas" style="height: 13em;"></div>
                        <div><canvas width="400" height="400"></canvas></div>
                    </div>
                </section>
                <section id="linear_algebra_map__translation">
                    <h3>Przesunięcie</h3>
                    <p>
                        <span>Przesunięcie to operacja dodania do współrzędnych punktu (𝑥, 𝑦) dowolnych wartości</span>
                        <math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="(t_x, t_y)"><mo data-latex="(" stretchy="false">(</mo><mrow><msub data-latex="t_x"><mi data-latex="t">t</mi><mi data-latex="x">x</mi></msub><mo data-latex=",">,</mo><msub data-latex="t_y"><mi data-latex="t">t</mi><mi data-latex="y">y</mi></msub></mrow><mo data-latex=")" stretchy="false">)</mo></math>
                        <span>nazywanych wartościami przesunięcia. Aby zrealizować przesunięcie punktu na płaszczyźnie za pomocą macierzy, należy zbudować macierz o wymiarach 𝟹 × 𝟹, a punkt reprezentować jako wektor (𝑥, 𝑦, 𝟷) w przestrzeni jednorodnej (o której będzie mowa w dalszej części artykułu).</span>
                    </p>
                    <p>Przykładowa macierz przesunięcia:</p>
                    <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\begin{bmatrix} 1 &amp; 0 &amp; t_x \\ 0 &amp; 1 &amp; t_y \\ 0 &amp; 0 &amp; 1 \end{bmatrix} \cdot \begin{bmatrix} x \\ y \\ 1 \end{bmatrix}=\begin{bmatrix} x' \\ y' \\ z' \end{bmatrix}" display="block"><mrow><mrow data-mjx-texclass="INNER" data-latex-item="{bmatrix}" data-latex="{bmatrix}"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><mn data-latex="1">1</mn></mtd><mtd><mn data-latex="0">0</mn></mtd><mtd><msub data-latex="t_x"><mi data-latex="t">t</mi><mi data-latex="x">x</mi></msub></mtd></mtr><mtr><mtd><mn data-latex="0">0</mn></mtd><mtd><mn data-latex="1">1</mn></mtd><mtd><msub data-latex="t_y"><mi data-latex="t">t</mi><mi data-latex="y">y</mi></msub></mtd></mtr><mtr><mtd><mn data-latex="0">0</mn></mtd><mtd><mn data-latex="0">0</mn></mtd><mtd><mn data-latex="1">1</mn></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow><mo data-latex="\cdot">⋅</mo><mrow data-mjx-texclass="INNER" data-latex-item="{bmatrix}" data-latex="{bmatrix}"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><mi data-latex="x">x</mi></mtd></mtr><mtr><mtd><mi data-latex="y">y</mi></mtd></mtr><mtr><mtd><mn data-latex="1">1</mn></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow></mrow><mo data-latex="=">=</mo><mrow data-mjx-texclass="INNER" data-latex-item="{bmatrix}" data-latex="{bmatrix}"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><msup><mi data-latex="x">x</mi><mo data-mjx-alternate="1">′</mo></msup></mtd></mtr><mtr><mtd><msup><mi data-latex="y">y</mi><mo data-mjx-alternate="1">′</mo></msup></mtd></mtr><mtr><mtd><msup><mi data-latex="z">z</mi><mo data-mjx-alternate="1">′</mo></msup></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow></math></p>
                    <p>Otrzymujemy następujące równania na wartości 𝑥′, 𝑦′, 𝑧′ wynikowego wektora:</p>
                    <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="x'=x \cdot 1 + y \cdot 0 + 1 \cdot t_x=x + t_x" display="block"><msup><mi data-latex="x">x</mi><mo data-mjx-alternate="1">′</mo></msup><mo data-latex="=">=</mo><mrow><mrow><mi data-latex="x">x</mi><mo data-latex="\cdot">⋅</mo><mn data-latex="1">1</mn></mrow><mo data-latex="+">+</mo><mrow><mi data-latex="y">y</mi><mo data-latex="\cdot">⋅</mo><mn data-latex="0">0</mn></mrow><mo data-latex="+">+</mo><mrow><mn data-latex="1">1</mn><mo data-latex="\cdot">⋅</mo><msub data-latex="t_x"><mi data-latex="t">t</mi><mi data-latex="x">x</mi></msub></mrow></mrow><mo data-latex="=">=</mo><mrow><mi data-latex="x">x</mi><mo data-latex="+">+</mo><msub data-latex="t_x"><mi data-latex="t">t</mi><mi data-latex="x">x</mi></msub></mrow></math></p>
                    <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="y'=x \cdot 0 + y \cdot 1 + 1 \cdot t_y=y + t_y" display="block"><msup><mi data-latex="y">y</mi><mo data-mjx-alternate="1">′</mo></msup><mo data-latex="=">=</mo><mrow><mrow><mi data-latex="x">x</mi><mo data-latex="\cdot">⋅</mo><mn data-latex="0">0</mn></mrow><mo data-latex="+">+</mo><mrow><mi data-latex="y">y</mi><mo data-latex="\cdot">⋅</mo><mn data-latex="1">1</mn></mrow><mo data-latex="+">+</mo><mrow><mn data-latex="1">1</mn><mo data-latex="\cdot">⋅</mo><msub data-latex="t_y"><mi data-latex="t">t</mi><mi data-latex="y">y</mi></msub></mrow></mrow><mo data-latex="=">=</mo><mrow><mi data-latex="y">y</mi><mo data-latex="+">+</mo><msub data-latex="t_y"><mi data-latex="t">t</mi><mi data-latex="y">y</mi></msub></mrow></math></p>
                    <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="z'=x \cdot 0 + y \cdot 0 + 1 \cdot 1=1" display="block"><msup><mi data-latex="z">z</mi><mo data-mjx-alternate="1">′</mo></msup><mo data-latex="=">=</mo><mrow><mrow><mi data-latex="x">x</mi><mo data-latex="\cdot">⋅</mo><mn data-latex="0">0</mn></mrow><mo data-latex="+">+</mo><mrow><mi data-latex="y">y</mi><mo data-latex="\cdot">⋅</mo><mn data-latex="0">0</mn></mrow><mo data-latex="+">+</mo><mrow><mn data-latex="1">1</mn><mo data-latex="\cdot">⋅</mo><mn data-latex="1">1</mn></mrow></mrow><mo data-latex="=">=</mo><mn data-latex="1">1</mn></math></p>
                    <p>
                        <span>Równania te dowodzą, że skonstruowana macierz realizuje przesunięcie o</span>
                        <math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="(t_x, t_y)"><mo data-latex="(" stretchy="false">(</mo><mrow><msub data-latex="t_x"><mi data-latex="t">t</mi><mi data-latex="x">x</mi></msub><mo data-latex=",">,</mo><msub data-latex="t_y"><mi data-latex="t">t</mi><mi data-latex="y">y</mi></msub></mrow><mo data-latex=")" stretchy="false">)</mo></math>
                        <span>, zatem:</span>
                    </p>
                    <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\begin{bmatrix} 1 &amp; 0 &amp; t_x \\ 0 &amp; 1 &amp; t_y \\ 0 &amp; 0 &amp; 1 \end{bmatrix} \cdot \begin{bmatrix} x \\ y \\ 1 \end{bmatrix}=\begin{bmatrix} x + t_x \\ y + t_y \\ 1 \end{bmatrix}" display="block"><mrow><mrow data-mjx-texclass="INNER" data-latex-item="{bmatrix}" data-latex="{bmatrix}"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><mn data-latex="1">1</mn></mtd><mtd><mn data-latex="0">0</mn></mtd><mtd><msub data-latex="t_x"><mi data-latex="t">t</mi><mi data-latex="x">x</mi></msub></mtd></mtr><mtr><mtd><mn data-latex="0">0</mn></mtd><mtd><mn data-latex="1">1</mn></mtd><mtd><msub data-latex="t_y"><mi data-latex="t">t</mi><mi data-latex="y">y</mi></msub></mtd></mtr><mtr><mtd><mn data-latex="0">0</mn></mtd><mtd><mn data-latex="0">0</mn></mtd><mtd><mn data-latex="1">1</mn></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow><mo data-latex="\cdot">⋅</mo><mrow data-mjx-texclass="INNER" data-latex-item="{bmatrix}" data-latex="{bmatrix}"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><mi data-latex="x">x</mi></mtd></mtr><mtr><mtd><mi data-latex="y">y</mi></mtd></mtr><mtr><mtd><mn data-latex="1">1</mn></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow></mrow><mo data-latex="=">=</mo><mrow data-mjx-texclass="INNER" data-latex-item="{bmatrix}" data-latex="{bmatrix}"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><mrow><mi data-latex="x">x</mi><mo data-latex="+">+</mo><msub data-latex="t_x"><mi data-latex="t">t</mi><mi data-latex="x">x</mi></msub></mrow></mtd></mtr><mtr><mtd><mrow><mi data-latex="y">y</mi><mo data-latex="+">+</mo><msub data-latex="t_y"><mi data-latex="t">t</mi><mi data-latex="y">y</mi></msub></mrow></mtd></mtr><mtr><mtd><mn data-latex="1">1</mn></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow></math></p>
                </section> 
                <section id="linear_algebra_map__combining">
                    <h3>Łączenie odwzorowań</h3>
                    <p>Odwzorowania liniowe reprezentowane w postaci macierzy, można łączyć, mnożąc te macierze przez siebie. Jeśli chcemy poddać zbiór wielu punktów szeregowi przekształceń, można wstępnie przemnożyć macierze tych przekształceń, a następnie każdy z punktów poddać jednemu mnożeniu przez powstałą macierz. Redukuje to liczbę wykonywanych operacji i poprawia efektywność obliczeń.</p>
                    <p>Kod programu łączącego obrót i przesunięcie w jedną macierz transformacji:</p>
                    <div class="code-with-output">
                        <div><canvas width="400" height="400"></canvas></div>
                        <div class="content-generated-from-code" module="linear_map" function="exampleTransform" output=":parent canvas" style="height: 28em;"></div>
                    </div>
                </section>
            </section>
            <hr>
            <section id="projection">
                <h2>Rzutowanie</h2>
                <p>Rzutowanie w kontekście tego artykułu oznacza odwzorowanie punktu w przestrzeni trójwymiarowej na płaszczyznę rzutowania (projection plane). Poniższa ilustracja przedstawia rzutowanie punktu 𝑃, na płaszczyznę 𝑉 (nazywaną rzutnią, płaszczyzną rzutowania, płaszczyzną obrazu etc.) w punkcie 𝑃′.</p>
                <img src="images/projection_perspective_point.svg" style="max-height: 25em;">
                <p>W artykule omówiono jedynie projekcję perspektywiczną (perspective projection), z jednym punktem obserwatora (single vanishing point). A więc taką jak przedstawiona na powyższej ilustracji. Warto wiedzieć, że istnieją jednak inne rodzaje rzutowań, takie jak projekcja równoległa (orthographic projection), projekcja perspektywiczna z wieloma punktami obserwatora (multi-point perspective projection) czy rzut panoramiczny (panoramic projection).</p>
                <section id="projection__perspective_divide">
                    <h3>Dzielenie perspektywiczne</h3>
                    <p>
                        <span>Najprostszym sposobem rzutowania perspektywicznego jest dzielenie perspektywiczne (perspective division). Polega ono na podzieleniu wartości 𝑥 i 𝑦 przez współrzędną 𝑧.</span>
                        <span>Dla rzutowanego punktu</span>
                        <math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="P=(x, y ,z )"><mi data-latex="P">P</mi><mo data-latex="=">=</mo><mrow><mo data-latex="(" stretchy="false">(</mo><mrow><mi data-latex="x">x</mi><mo data-latex=",">,</mo><mi data-latex="y">y</mi><mo data-latex=",">,</mo><mi data-latex="z">z</mi></mrow><mo data-latex=")" stretchy="false">)</mo></mrow></math>
                        <span>otrzymujemy na rzutni punkt</span>
                        <math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="P'=\Big(\frac{x}{z}, \frac{y}{z}\Big)"><msup><mi data-latex="P">P</mi><mo data-mjx-alternate="1">′</mo></msup><mo data-latex="=">=</mo><mrow><mrow data-mjx-texclass="ORD" data-latex="\Big("><mo minsize="1.623em" maxsize="1.623em">(</mo></mrow><mrow><mfrac data-latex="\frac{x}{z}"><mi data-latex="x">x</mi><mi data-latex="z">z</mi></mfrac><mo data-latex=",">,</mo><mfrac data-latex="\frac{y}{z}"><mi data-latex="y">y</mi><mi data-latex="z">z</mi></mfrac></mrow><mrow data-mjx-texclass="ORD" data-latex="\Big)"><mo minsize="1.623em" maxsize="1.623em">)</mo></mrow></mrow></math>
                        <span>.</span>
                    </p>
                    <p>Poniższa ilustracja przedstawia rzut kilku wybranych punktów. W prawej cześci ilustracji widać, że punkty znajdujące się coraz dalej na osi 𝑍 są rzutowane coraz bliżej środka rzutni. Jest to intuicyjne i zgodne z naszym codziennym doświadczeniem. W lewej części ilustracji widać, że punkty postaci (−𝑘, 𝟢, 𝑘) są rzutowane na końcową krawędź rzutni. Z tego faktu można wywnioskować, że szerokość pola widzenia w tym rzutowaniu wynosi 𝟫𝟢°.</p>
                    <img src="images/perspective_divide.svg" style="max-height: 25em;">
                    <p>Kod programu rysującego sześcian przy użyciu dzielenia perspektywicznego:</p>
                    <div class="code-with-output">
                        <div class="content-generated-from-code" module="projection" function="exampleOfPerspectiveDivision" output=":parent canvas" style="height: 33em;"></div>
                        <div style="display: flex; flex-direction: column;"><canvas width="400" height="400"></canvas></div>
                    </div>
                </section>
                <section id="projection__homogeneous_coordinates">
                    <h3>Współrzędne jednorodne</h3>
                    <p>Punkt na płaszczyźnie o współrzędnych h (𝑥, 𝑦) można zapisać w postaci współrzędnych jednorodnych 
                        (𝑥, 𝑦, 𝟣) lub bardziej ogólnie (𝑘𝑥, 𝑘𝑦, 𝑘), gdzie 𝑘 ≠ 𝟢.</p>
                    <p>Analogicznie punkt o współrzędnych jednorodnych (𝑥, 𝑦, 𝑧) posiada współrzędne na płaszczyźnie postaci (𝑥/𝑧, 𝑦/𝑧), co jest równoważne dzieleniu perspektywicznemu.</p>
                    <p>W dalszej części artykułu, zakłada się, że konstruowane macierze rzutowań zwracają współrzędne w przestrzeni jednorodnej. Jest to również zgodne z implementacjami OpenGL czy DirectX, gdzie współrzędne jednorodne są wykorzystywane w potoku renderowanie (rendering pipeline), w którym po otrzymaniu współrzędnych jednorodnych, wykonywanych jest szereg innych obliczeń, dopiero po których wykonuje się dzielenie perspektywiczne. Współrzędne jednorodne pozwalają na precyzyjniejsze i optymalniejsze wykonanie tych etapów. Mimo, że przedstawiona w tym artykule implementacja nie wprowadzaja żadnych tego typu optymalizacji, zachowana zostanie zgodność z operacjami na współrzędnych jednorodnych.</p>
                </section>
                <section id="projection__simple_matrix">
                    <h3>Prosta macierz projekcji</h3>
                    <p>Chcemy zdefiniować macierz która przekształci punkt (𝑥, 𝑦, 𝑧) w jego rzut we współrzędnych jednorodnych. Jak już pokazano, dzielenie perspektywiczne odpowiada wykorzystaniu współrzędnych jednorodnych, zatem wynikowy wektor powinien mieć postać (𝑥, 𝑦, 𝟢, 𝑧).</p>
                    <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\begin{bmatrix} \color{red}{m_{x1}} &amp; \color{red}{m_{x2}} &amp; \color{red}{m_{x3}} &amp; \color{red}{m_{x4}} \\ \color{green}{m_{y1}} &amp; \color{green}{m_{y2}} &amp; \color{green}{m_{y3}} &amp; \color{green}{m_{y4}} \\ \color{blue}{m_{z1}} &amp; \color{blue}{m_{z2}} &amp; \color{blue}{m_{z3}} &amp; \color{blue}{m_{z4}} \\ m_{w1} &amp; m_{w2} &amp; m_{w3} &amp; m_{w4} \end{bmatrix} \cdot \begin{bmatrix} x \\ y \\ z \\ w \end{bmatrix}=\begin{bmatrix} x' \\ y' \\ z' \\ w' \end{bmatrix}=\begin{bmatrix} \color{red}{m_{x1}} \cdot x + \color{red}{m_{x2}} \cdot y + \color{red}{m_{x3}} \cdot z + \color{red}{m_{x4}} \cdot w \\ \color{green}{m_{y1}} \cdot x + \color{green}{m_{y2}} \cdot y + \color{green}{m_{y3}} \cdot z + \color{green}{m_{y4}} \cdot w \\ \color{blue}{m_{z1}} \cdot x + \color{blue}{m_{z2}} \cdot y + \color{blue}{m_{z3}} \cdot z + \color{blue}{m_{z4}} \cdot w \\ {m_{w1}} \cdot x +{m_{w2}} \cdot y +{m_{w3}} \cdot z +{m_{w4}} \cdot w \end{bmatrix}" display="block"><mrow><mrow data-mjx-texclass="INNER" data-latex-item="{bmatrix}" data-latex="{bmatrix}"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><mstyle mathcolor="red" data-latex="\color{red}{m_{x1}}"><msub data-latex="m_{x1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x1}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="1">1</mn></mrow></msub></mstyle></mtd><mtd><mstyle mathcolor="red" data-latex="\color{red}{m_{x2}}"><msub data-latex="m_{x2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x2}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="2">2</mn></mrow></msub></mstyle></mtd><mtd><mstyle mathcolor="red" data-latex="\color{red}{m_{x3}}"><msub data-latex="m_{x3}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x3}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="3">3</mn></mrow></msub></mstyle></mtd><mtd><mstyle mathcolor="red" data-latex="\color{red}{m_{x4}}"><msub data-latex="m_{x4}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x4}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="4">4</mn></mrow></msub></mstyle></mtd></mtr><mtr><mtd><mstyle mathcolor="green" data-latex="\color{green}{m_{y1}}"><msub data-latex="m_{y1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y1}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="1">1</mn></mrow></msub></mstyle></mtd><mtd><mstyle mathcolor="green" data-latex="\color{green}{m_{y2}}"><msub data-latex="m_{y2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y2}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="2">2</mn></mrow></msub></mstyle></mtd><mtd><mstyle mathcolor="green" data-latex="\color{green}{m_{y3}}"><msub data-latex="m_{y3}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y3}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="3">3</mn></mrow></msub></mstyle></mtd><mtd><mstyle mathcolor="green" data-latex="\color{green}{m_{y4}}"><msub data-latex="m_{y4}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y4}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="4">4</mn></mrow></msub></mstyle></mtd></mtr><mtr><mtd><mstyle mathcolor="blue" data-latex="\color{blue}{m_{z1}}"><msub data-latex="m_{z1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{z1}"><mi data-latex="z">z</mi><mo>⁢</mo><mn data-latex="1">1</mn></mrow></msub></mstyle></mtd><mtd><mstyle mathcolor="blue" data-latex="\color{blue}{m_{z2}}"><msub data-latex="m_{z2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{z2}"><mi data-latex="z">z</mi><mo>⁢</mo><mn data-latex="2">2</mn></mrow></msub></mstyle></mtd><mtd><mstyle mathcolor="blue" data-latex="\color{blue}{m_{z3}}"><msub data-latex="m_{z3}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{z3}"><mi data-latex="z">z</mi><mo>⁢</mo><mn data-latex="3">3</mn></mrow></msub></mstyle></mtd><mtd><mstyle mathcolor="blue" data-latex="\color{blue}{m_{z4}}"><msub data-latex="m_{z4}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{z4}"><mi data-latex="z">z</mi><mo>⁢</mo><mn data-latex="4">4</mn></mrow></msub></mstyle></mtd></mtr><mtr><mtd><msub data-latex="m_{w1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{w1}"><mi data-latex="w">w</mi><mo>⁢</mo><mn data-latex="1">1</mn></mrow></msub></mtd><mtd><msub data-latex="m_{w2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{w2}"><mi data-latex="w">w</mi><mo>⁢</mo><mn data-latex="2">2</mn></mrow></msub></mtd><mtd><msub data-latex="m_{w3}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{w3}"><mi data-latex="w">w</mi><mo>⁢</mo><mn data-latex="3">3</mn></mrow></msub></mtd><mtd><msub data-latex="m_{w4}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{w4}"><mi data-latex="w">w</mi><mo>⁢</mo><mn data-latex="4">4</mn></mrow></msub></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow><mo data-latex="\cdot">⋅</mo><mrow data-mjx-texclass="INNER" data-latex-item="{bmatrix}" data-latex="{bmatrix}"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><mi data-latex="x">x</mi></mtd></mtr><mtr><mtd><mi data-latex="y">y</mi></mtd></mtr><mtr><mtd><mi data-latex="z">z</mi></mtd></mtr><mtr><mtd><mi data-latex="w">w</mi></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow></mrow><mo data-latex="=">=</mo><mrow data-mjx-texclass="INNER" data-latex-item="{bmatrix}" data-latex="{bmatrix}"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><msup><mi data-latex="x">x</mi><mo data-mjx-alternate="1">′</mo></msup></mtd></mtr><mtr><mtd><msup><mi data-latex="y">y</mi><mo data-mjx-alternate="1">′</mo></msup></mtd></mtr><mtr><mtd><msup><mi data-latex="z">z</mi><mo data-mjx-alternate="1">′</mo></msup></mtd></mtr><mtr><mtd><msup><mi data-latex="w">w</mi><mo data-mjx-alternate="1">′</mo></msup></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow><mo data-latex="=">=</mo><mrow data-mjx-texclass="INNER" data-latex-item="{bmatrix}" data-latex="{bmatrix}"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><mrow><mrow><mstyle mathcolor="red" data-latex="\color{red}{m_{x1}}"><msub data-latex="m_{x1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x1}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="1">1</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="x">x</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="red" data-latex="\color{red}{m_{x2}}"><msub data-latex="m_{x2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x2}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="2">2</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="y">y</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="red" data-latex="\color{red}{m_{x3}}"><msub data-latex="m_{x3}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x3}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="3">3</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="z">z</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="red" data-latex="\color{red}{m_{x4}}"><msub data-latex="m_{x4}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x4}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="4">4</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="w">w</mi></mrow></mrow></mtd></mtr><mtr><mtd><mrow><mrow><mstyle mathcolor="green" data-latex="\color{green}{m_{y1}}"><msub data-latex="m_{y1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y1}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="1">1</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="x">x</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="green" data-latex="\color{green}{m_{y2}}"><msub data-latex="m_{y2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y2}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="2">2</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="y">y</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="green" data-latex="\color{green}{m_{y3}}"><msub data-latex="m_{y3}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y3}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="3">3</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="z">z</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="green" data-latex="\color{green}{m_{y4}}"><msub data-latex="m_{y4}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y4}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="4">4</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="w">w</mi></mrow></mrow></mtd></mtr><mtr><mtd><mrow><mrow><mstyle mathcolor="blue" data-latex="\color{blue}{m_{z1}}"><msub data-latex="m_{z1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{z1}"><mi data-latex="z">z</mi><mo>⁢</mo><mn data-latex="1">1</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="x">x</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="blue" data-latex="\color{blue}{m_{z2}}"><msub data-latex="m_{z2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{z2}"><mi data-latex="z">z</mi><mo>⁢</mo><mn data-latex="2">2</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="y">y</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="blue" data-latex="\color{blue}{m_{z3}}"><msub data-latex="m_{z3}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{z3}"><mi data-latex="z">z</mi><mo>⁢</mo><mn data-latex="3">3</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="z">z</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="blue" data-latex="\color{blue}{m_{z4}}"><msub data-latex="m_{z4}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{z4}"><mi data-latex="z">z</mi><mo>⁢</mo><mn data-latex="4">4</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="w">w</mi></mrow></mrow></mtd></mtr><mtr><mtd><mrow><mrow><mrow data-mjx-texclass="ORD" data-latex="{m_{w1}}"><msub data-latex="m_{w1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{w1}"><mi data-latex="w">w</mi><mo>⁢</mo><mn data-latex="1">1</mn></mrow></msub></mrow><mo data-latex="\cdot">⋅</mo><mi data-latex="x">x</mi></mrow><mo data-latex="+">+</mo><mrow><mrow data-mjx-texclass="ORD" data-latex="{m_{w2}}"><msub data-latex="m_{w2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{w2}"><mi data-latex="w">w</mi><mo>⁢</mo><mn data-latex="2">2</mn></mrow></msub></mrow><mo data-latex="\cdot">⋅</mo><mi data-latex="y">y</mi></mrow><mo data-latex="+">+</mo><mrow><mrow data-mjx-texclass="ORD" data-latex="{m_{w3}}"><msub data-latex="m_{w3}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{w3}"><mi data-latex="w">w</mi><mo>⁢</mo><mn data-latex="3">3</mn></mrow></msub></mrow><mo data-latex="\cdot">⋅</mo><mi data-latex="z">z</mi></mrow><mo data-latex="+">+</mo><mrow><mrow data-mjx-texclass="ORD" data-latex="{m_{w4}}"><msub data-latex="m_{w4}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{w4}"><mi data-latex="w">w</mi><mo>⁢</mo><mn data-latex="4">4</mn></mrow></msub></mrow><mo data-latex="\cdot">⋅</mo><mi data-latex="w">w</mi></mrow></mrow></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow></math></p>
                    <p>Zgodnie z definicją współrzędnych jednorodnych, chcemy aby:</p>
                    <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="x'=x, \quad y'=y, \quad z'=0, \quad w'=z" display="block"><mrow><msup><mi data-latex="x">x</mi><mo data-mjx-alternate="1">′</mo></msup><mo data-latex="=">=</mo><mi data-latex="x">x</mi></mrow><mo data-latex=",">,</mo><mrow><mstyle scriptlevel="0" data-latex="\quad"><mspace width="1em"></mspace></mstyle><mrow><msup><mi data-latex="y">y</mi><mo data-mjx-alternate="1">′</mo></msup><mo data-latex="=">=</mo><mi data-latex="y">y</mi></mrow></mrow><mo data-latex=",">,</mo><mrow><mstyle scriptlevel="0" data-latex="\quad"><mspace width="1em"></mspace></mstyle><mrow><msup><mi data-latex="z">z</mi><mo data-mjx-alternate="1">′</mo></msup><mo data-latex="=">=</mo><mn data-latex="0">0</mn></mrow></mrow><mo data-latex=",">,</mo><mrow><mstyle scriptlevel="0" data-latex="\quad"><mspace width="1em"></mspace></mstyle><mrow><msup><mi data-latex="w">w</mi><mo data-mjx-alternate="1">′</mo></msup><mo data-latex="=">=</mo><mi data-latex="z">z</mi></mrow></mrow></math></p>
                    <p>A więc musi zachodzić:</p>
                    <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="x'=x \iff \begin{bmatrix} \color{red}{m_{x1}} \cdot x + \color{red}{m_{x2}} \cdot y + \color{red}{m_{x3}} \cdot z + \color{red}{m_{x4}} \cdot w \end{bmatrix}=x \iff \color{red}{m_{x1}}=1, \quad \color{red}{m_{x2}}=\color{red}{m_{x3}}=\color{red}{m_{x4}}=0" display="block"><mrow><msup><mi data-latex="x">x</mi><mo data-mjx-alternate="1">′</mo></msup><mo data-latex="=">=</mo><mi data-latex="x">x</mi><mstyle scriptlevel="0" data-latex="\;"><mspace width="0.278em"></mspace></mstyle><mo stretchy="false" data-latex="\Longleftrightarrow">⟺</mo><mstyle scriptlevel="0" data-latex="\;"><mspace width="0.278em"></mspace></mstyle><mrow data-mjx-texclass="INNER" data-latex-item="{bmatrix}" data-latex="{bmatrix}"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><mrow><mrow><mstyle mathcolor="red" data-latex="\color{red}{m_{x1}}"><msub data-latex="m_{x1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x1}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="1">1</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="x">x</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="red" data-latex="\color{red}{m_{x2}}"><msub data-latex="m_{x2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x2}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="2">2</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="y">y</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="red" data-latex="\color{red}{m_{x3}}"><msub data-latex="m_{x3}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x3}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="3">3</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="z">z</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="red" data-latex="\color{red}{m_{x4}}"><msub data-latex="m_{x4}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x4}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="4">4</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="w">w</mi></mrow></mrow></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow><mo data-latex="=">=</mo><mi data-latex="x">x</mi><mstyle scriptlevel="0" data-latex="\;"><mspace width="0.278em"></mspace></mstyle><mo stretchy="false" data-latex="\Longleftrightarrow">⟺</mo><mstyle scriptlevel="0" data-latex="\;"><mspace width="0.278em"></mspace></mstyle><mstyle mathcolor="red" data-latex="\color{red}{m_{x1}}"><msub data-latex="m_{x1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x1}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="1">1</mn></mrow></msub></mstyle><mo data-latex="=">=</mo><mn data-latex="1">1</mn></mrow><mo data-latex=",">,</mo><mrow><mstyle scriptlevel="0" data-latex="\quad"><mspace width="1em"></mspace></mstyle><mrow><mstyle mathcolor="red" data-latex="\color{red}{m_{x2}}"><msub data-latex="m_{x2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x2}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="2">2</mn></mrow></msub></mstyle><mo data-latex="=">=</mo><mstyle mathcolor="red" data-latex="\color{red}{m_{x3}}"><msub data-latex="m_{x3}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x3}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="3">3</mn></mrow></msub></mstyle><mo data-latex="=">=</mo><mstyle mathcolor="red" data-latex="\color{red}{m_{x4}}"><msub data-latex="m_{x4}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x4}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="4">4</mn></mrow></msub></mstyle><mo data-latex="=">=</mo><mn data-latex="0">0</mn></mrow></mrow></math></p>
                    <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="y'=y \iff \begin{bmatrix} \color{green}{m_{y1}} \cdot x + \color{green}{m_{y2}} \cdot y + \color{green}{m_{y3}} \cdot z + \color{green}{m_{y4}} \cdot w \end{bmatrix}=y \iff \color{green}{m_{y2}}=1, \quad \color{green}{m_{y1}}=\color{green}{m_{y3}}=\color{green}{m_{y4}}=0" display="block"><mrow><msup><mi data-latex="y">y</mi><mo data-mjx-alternate="1" data-latex="'">′</mo></msup><mo data-latex="=">=</mo><mi data-latex="y">y</mi><mstyle scriptlevel="0" data-latex="\;"><mspace width="0.278em"></mspace></mstyle><mo stretchy="false" data-latex="\Longleftrightarrow">⟺</mo><mstyle scriptlevel="0" data-latex="\;"><mspace width="0.278em"></mspace></mstyle><mrow data-mjx-texclass="INNER" data-latex-item="{bmatrix}" data-latex="{bmatrix}"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><mrow><mrow><mstyle mathcolor="green" data-latex="\color{green}{m_{y1}}"><msub data-latex="m_{y1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y1}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="1">1</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="x">x</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="green" data-latex="\color{green}{m_{y2}}"><msub data-latex="m_{y2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y2}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="2">2</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="y">y</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="green" data-latex="\color{green}{m_{y3}}"><msub data-latex="m_{y3}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y3}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="3">3</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="z">z</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="green" data-latex="\color{green}{m_{y4}}"><msub data-latex="m_{y4}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y4}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="4">4</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="w">w</mi></mrow></mrow></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow><mo data-latex="=">=</mo><mi data-latex="y">y</mi><mstyle scriptlevel="0" data-latex="\;"><mspace width="0.278em"></mspace></mstyle><mo stretchy="false" data-latex="\Longleftrightarrow">⟺</mo><mstyle scriptlevel="0" data-latex="\;"><mspace width="0.278em"></mspace></mstyle><mstyle mathcolor="green" data-latex="\color{green}{m_{y2}}"><msub data-latex="m_{y2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y2}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="2">2</mn></mrow></msub></mstyle><mo data-latex="=">=</mo><mn data-latex="1">1</mn></mrow><mo data-latex=",">,</mo><mrow><mstyle scriptlevel="0" data-latex="\quad"><mspace width="1em"></mspace></mstyle><mrow><mstyle mathcolor="green" data-latex="\color{green}{m_{y1}}"><msub data-latex="m_{y1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y1}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="1">1</mn></mrow></msub></mstyle><mo data-latex="=">=</mo><mstyle mathcolor="green" data-latex="\color{green}{m_{y3}}"><msub data-latex="m_{y3}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y3}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="3">3</mn></mrow></msub></mstyle><mo data-latex="=">=</mo><mstyle mathcolor="green" data-latex="\color{green}{m_{y4}}"><msub data-latex="m_{y4}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y4}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="4">4</mn></mrow></msub></mstyle><mo data-latex="=">=</mo><mn data-latex="0">0</mn></mrow></mrow></math></p>
                    <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="z'=0 \iff \begin{bmatrix} \color{blue}{m_{z1}} \cdot x + \color{blue}{m_{z2}} \cdot y + \color{blue}{m_{z3}} \cdot z + \color{blue}{m_{z4}} \cdot w \end{bmatrix}=0 \iff \color{blue}{m_{y1}}=\color{blue}{m_{y2}}=\color{blue}{m_{y3}}=\color{blue}{m_{y4}}=0" display="block"><mrow><msup><mi></mi><mo data-mjx-alternate="1" data-latex="'">′</mo></msup><mo>⁢</mo><mi data-latex="z">z</mi></mrow><mo data-latex="=">=</mo><mn data-latex="0">0</mn><mstyle scriptlevel="0" data-latex="\;"><mspace width="0.278em"></mspace></mstyle><mo stretchy="false" data-latex="\Longleftrightarrow">⟺</mo><mstyle scriptlevel="0" data-latex="\;"><mspace width="0.278em"></mspace></mstyle><mrow data-mjx-texclass="INNER" data-latex-item="{bmatrix}" data-latex="{bmatrix}"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><mrow><mrow><mstyle mathcolor="blue" data-latex="\color{blue}{m_{z1}}"><msub data-latex="m_{z1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{z1}"><mi data-latex="z">z</mi><mo>⁢</mo><mn data-latex="1">1</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="x">x</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="blue" data-latex="\color{blue}{m_{z2}}"><msub data-latex="m_{z2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{z2}"><mi data-latex="z">z</mi><mo>⁢</mo><mn data-latex="2">2</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="y">y</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="blue" data-latex="\color{blue}{m_{z3}}"><msub data-latex="m_{z3}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{z3}"><mi data-latex="z">z</mi><mo>⁢</mo><mn data-latex="3">3</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="z">z</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="blue" data-latex="\color{blue}{m_{z4}}"><msub data-latex="m_{z4}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{z4}"><mi data-latex="z">z</mi><mo>⁢</mo><mn data-latex="4">4</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="w">w</mi></mrow></mrow></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow><mo data-latex="=">=</mo><mn data-latex="0">0</mn><mstyle scriptlevel="0" data-latex="\;"><mspace width="0.278em"></mspace></mstyle><mo stretchy="false" data-latex="\Longleftrightarrow">⟺</mo><mstyle scriptlevel="0" data-latex="\;"><mspace width="0.278em"></mspace></mstyle><mstyle mathcolor="blue" data-latex="\color{blue}{m_{y1}}"><msub data-latex="m_{y1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y1}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="1">1</mn></mrow></msub></mstyle><mo data-latex="=">=</mo><mstyle mathcolor="blue" data-latex="\color{blue}{m_{y2}}"><msub data-latex="m_{y2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y2}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="2">2</mn></mrow></msub></mstyle><mo data-latex="=">=</mo><mstyle mathcolor="blue" data-latex="\color{blue}{m_{y3}}"><msub data-latex="m_{y3}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y3}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="3">3</mn></mrow></msub></mstyle><mo data-latex="=">=</mo><mstyle mathcolor="blue" data-latex="\color{blue}{m_{y4}}"><msub data-latex="m_{y4}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y4}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="4">4</mn></mrow></msub></mstyle><mo data-latex="=">=</mo><mn data-latex="0">0</mn></math></p>
                    <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="w'=z \iff \begin{bmatrix}{m_{y1}} \cdot x +{m_{y2}} \cdot y +{m_{y3}} \cdot z +{m_{y4}} \cdot w \end{bmatrix}=z \iff{m_{y4}}=1, \quad{m_{y1}}={m_{y2}}={m_{y3}}=0" display="block"><mrow><msup><mi data-latex="w">w</mi><mo data-mjx-alternate="1" data-latex="'">′</mo></msup><mo data-latex="=">=</mo><mi data-latex="z">z</mi><mstyle scriptlevel="0" data-latex="\;"><mspace width="0.278em"></mspace></mstyle><mo stretchy="false" data-latex="\Longleftrightarrow">⟺</mo><mstyle scriptlevel="0" data-latex="\;"><mspace width="0.278em"></mspace></mstyle><mrow data-mjx-texclass="INNER" data-latex-item="{bmatrix}" data-latex="{bmatrix}"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><mrow><mrow><mrow data-mjx-texclass="ORD" data-latex="{m_{y1}}"><msub data-latex="m_{y1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y1}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="1">1</mn></mrow></msub></mrow><mo data-latex="\cdot">⋅</mo><mi data-latex="x">x</mi></mrow><mo data-latex="+">+</mo><mrow><mrow data-mjx-texclass="ORD" data-latex="{m_{y2}}"><msub data-latex="m_{y2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y2}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="2">2</mn></mrow></msub></mrow><mo data-latex="\cdot">⋅</mo><mi data-latex="y">y</mi></mrow><mo data-latex="+">+</mo><mrow><mrow data-mjx-texclass="ORD" data-latex="{m_{y3}}"><msub data-latex="m_{y3}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y3}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="3">3</mn></mrow></msub></mrow><mo data-latex="\cdot">⋅</mo><mi data-latex="z">z</mi></mrow><mo data-latex="+">+</mo><mrow><mrow data-mjx-texclass="ORD" data-latex="{m_{y4}}"><msub data-latex="m_{y4}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y4}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="4">4</mn></mrow></msub></mrow><mo data-latex="\cdot">⋅</mo><mi data-latex="w">w</mi></mrow></mrow></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow><mo data-latex="=">=</mo><mi data-latex="z">z</mi><mstyle scriptlevel="0" data-latex="\;"><mspace width="0.278em"></mspace></mstyle><mo stretchy="false" data-latex="\Longleftrightarrow">⟺</mo><mstyle scriptlevel="0" data-latex="\;"><mspace width="0.278em"></mspace></mstyle><mrow data-mjx-texclass="ORD" data-latex="{m_{y4}}"><msub data-latex="m_{y4}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y4}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="4">4</mn></mrow></msub></mrow><mo data-latex="=">=</mo><mn data-latex="1">1</mn></mrow><mo data-latex=",">,</mo><mrow><mstyle scriptlevel="0" data-latex="\quad"><mspace width="1em"></mspace></mstyle><mrow><mrow data-mjx-texclass="ORD" data-latex="{m_{y1}}"><msub data-latex="m_{y1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y1}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="1">1</mn></mrow></msub></mrow><mo data-latex="=">=</mo><mrow data-mjx-texclass="ORD" data-latex="{m_{y2}}"><msub data-latex="m_{y2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y2}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="2">2</mn></mrow></msub></mrow><mo data-latex="=">=</mo><mrow data-mjx-texclass="ORD" data-latex="{m_{y3}}"><msub data-latex="m_{y3}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y3}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="3">3</mn></mrow></msub></mrow><mo data-latex="=">=</mo><mn data-latex="0">0</mn></mrow></mrow></math></p>
                    <p>Macierz dzielenia perspektywicznego ma zatem postać:</p>
                    <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\begin{bmatrix} 1 &amp; 0 &amp; 0 &amp; 0 \\ 0 &amp; 1 &amp; 0 &amp; 0 \\ 0 &amp; 0 &amp; 0 &amp; 0 \\ 0 &amp; 0 &amp; 1 &amp; 0 \\ \end{bmatrix}" display="block"><mrow data-mjx-texclass="INNER" data-latex-item="{bmatrix}" data-latex="\begin{bmatrix} 1 &amp; 0 &amp; 0 &amp; 0 \\ 0 &amp; 1 &amp; 0 &amp; 0 \\ 0 &amp; 0 &amp; 0 &amp; 0 \\ 0 &amp; 0 &amp; 1 &amp; 0 \\ \end{bmatrix}"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><mn data-latex="1">1</mn></mtd><mtd><mn data-latex="0">0</mn></mtd><mtd><mn data-latex="0">0</mn></mtd><mtd><mn data-latex="0">0</mn></mtd></mtr><mtr><mtd><mn data-latex="0">0</mn></mtd><mtd><mn data-latex="1">1</mn></mtd><mtd><mn data-latex="0">0</mn></mtd><mtd><mn data-latex="0">0</mn></mtd></mtr><mtr><mtd><mn data-latex="0">0</mn></mtd><mtd><mn data-latex="0">0</mn></mtd><mtd><mn data-latex="0">0</mn></mtd><mtd><mn data-latex="0">0</mn></mtd></mtr><mtr><mtd><mn data-latex="0">0</mn></mtd><mtd><mn data-latex="0">0</mn></mtd><mtd><mn data-latex="1">1</mn></mtd><mtd><mn data-latex="0">0</mn></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow></math></p>
                    <p>Kod funkcji tworzącej macierz dzielenia perspektywicznego:</p>
                    <div class="content-generated-from-code" module="projection" function="createSimpleProjection" style="height: 20em;"></div>
                    <p>Kod programu rysującego sześcian wykorzystujący macierz dzielenia perspektywicznego:</p>
                    <div class="code-with-output">
                        <div class="content-generated-from-code" module="projection" function="exampleOfProjectionWithSimpleMatrix" output=":parent canvas" style="height: 36em;"></div>
                        <div style="display: flex; flex-direction: column;"><canvas width="400" height="400"></canvas></div>
                    </div>
                </section>
                <section id="projection__matrix">
                    <h3>Macierz projekcji</h3>
                    <p>W rzeczywistych rozwiązaniach stosuje się bardziej złożone macierze rzutowania perspektywicznego. Najbardziej popularną metodą konstrukcji jest ta oparta o kąt widzenia (field of view, FOV). Sposób jej konstrukcji można znaleźć pod adresem <a href="https://www.songho.ca/opengl/gl_projectionmatrix.html#fov">https://www.songho.ca/opengl/gl_projectionmatrix.html#fov</a>. W przykładzie zostanie przedstawiona mniej popularna metoda, oparta na ograniczeniach płaszczyzny widzenia: <i>top, left, right, bottom</i>. Obie metody dają te same możliwości rzutowania, ale różnią się zestawem parametrów służącym do konstrukcji macierzy.</p>
                    <p>Do konstrukcji macierzy rzutowania przyjmuje się następujące parametry rzutowania:</p>
                    <ul>
                        <li><span style="font-weight: 500;">left</span> – współrzędna lewej krawędzi bliższej płaszczyzny odcinania.</li>
                        <li><span style="font-weight: 500;">right</span> – współrzędna prawej krawędzi bliższej płaszczyzny odcinania.</li>
                        <li><span style="font-weight: 500;">top</span> – współrzędna górnej krawędzi bliższej płaszczyzny odcinania.</li>
                        <li><span style="font-weight: 500;">bottom</span> – współrzędna dolnej krawędzi bliższej płaszczyzny odcinania.</li>
                        <li><span style="font-weight: 500;">near</span> – odległość do bliższej płaszczyzny odcinania (near clipping plane).</li>
                        <li><span style="font-weight: 500;">far</span> – odległość do dalszej płaszczyzny odcinania (far clipping plane).</li>
                    </ul>
                    <p>Powyższe parametry definiują tak zwaną bryłę widzenia (viewing frustum), będącą ściętym ostrosłupem, który ogranicza to co jest widoczne.</p>
                    <img src="images/projection_perspective_clipping.svg" style="max-height: 25em;">
                    <p>W dalszej częsci zostanie przedstawiona konstrukcja macierzy rzutowania perspektywicznego wiersz po wierszu, czyli dla każdej kolejnej współrzędnej wynikowego wektora.</p>
                    <math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\begin{bmatrix} \color{red}{m_{x1}} &amp; \color{red}{m_{x2}} &amp; \color{red}{m_{x3}} &amp; \color{red}{m_{x4}} \\ \color{green}{m_{y1}} &amp; \color{green}{m_{y2}} &amp; \color{green}{m_{y3}} &amp; \color{green}{m_{y4}} \\ \color{blue}{m_{z1}} &amp; \color{blue}{m_{z2}} &amp; \color{blue}{m_{z3}} &amp; \color{blue}{m_{z4}} \\ m_{w1} &amp; m_{w2} &amp; m_{w3} &amp; m_{w4} \end{bmatrix} \cdot \begin{bmatrix} x \\ y \\ z \\ w \end{bmatrix}=\begin{bmatrix} x' \\ y' \\ z' \\ w' \end{bmatrix}=\begin{bmatrix} \color{red}{m_{x1}} \cdot x + \color{red}{m_{x2}} \cdot y + \color{red}{m_{x3}} \cdot z + \color{red}{m_{x4}} \cdot w \\ \color{green}{m_{y1}} \cdot x + \color{green}{m_{y2}} \cdot y + \color{green}{m_{y3}} \cdot z + \color{green}{m_{y4}} \cdot w \\ \color{blue}{m_{z1}} \cdot x + \color{blue}{m_{z2}} \cdot y + \color{blue}{m_{z3}} \cdot z + \color{blue}{m_{z4}} \cdot w \\ {m_{w1}} \cdot x +{m_{w2}} \cdot y +{m_{w3}} \cdot z +{m_{w4}} \cdot w \end{bmatrix}" display="block"><mrow><mrow data-mjx-texclass="INNER" data-latex-item="{bmatrix}" data-latex="{bmatrix}"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><mstyle mathcolor="red" data-latex="\color{red}{m_{x1}}"><msub data-latex="m_{x1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x1}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="1">1</mn></mrow></msub></mstyle></mtd><mtd><mstyle mathcolor="red" data-latex="\color{red}{m_{x2}}"><msub data-latex="m_{x2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x2}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="2">2</mn></mrow></msub></mstyle></mtd><mtd><mstyle mathcolor="red" data-latex="\color{red}{m_{x3}}"><msub data-latex="m_{x3}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x3}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="3">3</mn></mrow></msub></mstyle></mtd><mtd><mstyle mathcolor="red" data-latex="\color{red}{m_{x4}}"><msub data-latex="m_{x4}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x4}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="4">4</mn></mrow></msub></mstyle></mtd></mtr><mtr><mtd><mstyle mathcolor="green" data-latex="\color{green}{m_{y1}}"><msub data-latex="m_{y1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y1}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="1">1</mn></mrow></msub></mstyle></mtd><mtd><mstyle mathcolor="green" data-latex="\color{green}{m_{y2}}"><msub data-latex="m_{y2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y2}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="2">2</mn></mrow></msub></mstyle></mtd><mtd><mstyle mathcolor="green" data-latex="\color{green}{m_{y3}}"><msub data-latex="m_{y3}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y3}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="3">3</mn></mrow></msub></mstyle></mtd><mtd><mstyle mathcolor="green" data-latex="\color{green}{m_{y4}}"><msub data-latex="m_{y4}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y4}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="4">4</mn></mrow></msub></mstyle></mtd></mtr><mtr><mtd><mstyle mathcolor="blue" data-latex="\color{blue}{m_{z1}}"><msub data-latex="m_{z1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{z1}"><mi data-latex="z">z</mi><mo>⁢</mo><mn data-latex="1">1</mn></mrow></msub></mstyle></mtd><mtd><mstyle mathcolor="blue" data-latex="\color{blue}{m_{z2}}"><msub data-latex="m_{z2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{z2}"><mi data-latex="z">z</mi><mo>⁢</mo><mn data-latex="2">2</mn></mrow></msub></mstyle></mtd><mtd><mstyle mathcolor="blue" data-latex="\color{blue}{m_{z3}}"><msub data-latex="m_{z3}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{z3}"><mi data-latex="z">z</mi><mo>⁢</mo><mn data-latex="3">3</mn></mrow></msub></mstyle></mtd><mtd><mstyle mathcolor="blue" data-latex="\color{blue}{m_{z4}}"><msub data-latex="m_{z4}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{z4}"><mi data-latex="z">z</mi><mo>⁢</mo><mn data-latex="4">4</mn></mrow></msub></mstyle></mtd></mtr><mtr><mtd><msub data-latex="m_{w1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{w1}"><mi data-latex="w">w</mi><mo>⁢</mo><mn data-latex="1">1</mn></mrow></msub></mtd><mtd><msub data-latex="m_{w2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{w2}"><mi data-latex="w">w</mi><mo>⁢</mo><mn data-latex="2">2</mn></mrow></msub></mtd><mtd><msub data-latex="m_{w3}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{w3}"><mi data-latex="w">w</mi><mo>⁢</mo><mn data-latex="3">3</mn></mrow></msub></mtd><mtd><msub data-latex="m_{w4}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{w4}"><mi data-latex="w">w</mi><mo>⁢</mo><mn data-latex="4">4</mn></mrow></msub></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow><mo data-latex="\cdot">⋅</mo><mrow data-mjx-texclass="INNER" data-latex-item="{bmatrix}" data-latex="{bmatrix}"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><mi data-latex="x">x</mi></mtd></mtr><mtr><mtd><mi data-latex="y">y</mi></mtd></mtr><mtr><mtd><mi data-latex="z">z</mi></mtd></mtr><mtr><mtd><mi data-latex="w">w</mi></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow></mrow><mo data-latex="=">=</mo><mrow data-mjx-texclass="INNER" data-latex-item="{bmatrix}" data-latex="{bmatrix}"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><msup><mi data-latex="x">x</mi><mo data-mjx-alternate="1">′</mo></msup></mtd></mtr><mtr><mtd><msup><mi data-latex="y">y</mi><mo data-mjx-alternate="1">′</mo></msup></mtd></mtr><mtr><mtd><msup><mi data-latex="z">z</mi><mo data-mjx-alternate="1">′</mo></msup></mtd></mtr><mtr><mtd><msup><mi data-latex="w">w</mi><mo data-mjx-alternate="1">′</mo></msup></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow><mo data-latex="=">=</mo><mrow data-mjx-texclass="INNER" data-latex-item="{bmatrix}" data-latex="{bmatrix}"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><mrow><mrow><mstyle mathcolor="red" data-latex="\color{red}{m_{x1}}"><msub data-latex="m_{x1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x1}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="1">1</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="x">x</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="red" data-latex="\color{red}{m_{x2}}"><msub data-latex="m_{x2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x2}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="2">2</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="y">y</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="red" data-latex="\color{red}{m_{x3}}"><msub data-latex="m_{x3}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x3}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="3">3</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="z">z</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="red" data-latex="\color{red}{m_{x4}}"><msub data-latex="m_{x4}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x4}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="4">4</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="w">w</mi></mrow></mrow></mtd></mtr><mtr><mtd><mrow><mrow><mstyle mathcolor="green" data-latex="\color{green}{m_{y1}}"><msub data-latex="m_{y1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y1}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="1">1</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="x">x</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="green" data-latex="\color{green}{m_{y2}}"><msub data-latex="m_{y2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y2}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="2">2</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="y">y</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="green" data-latex="\color{green}{m_{y3}}"><msub data-latex="m_{y3}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y3}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="3">3</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="z">z</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="green" data-latex="\color{green}{m_{y4}}"><msub data-latex="m_{y4}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{y4}"><mi data-latex="y">y</mi><mo>⁢</mo><mn data-latex="4">4</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="w">w</mi></mrow></mrow></mtd></mtr><mtr><mtd><mrow><mrow><mstyle mathcolor="blue" data-latex="\color{blue}{m_{z1}}"><msub data-latex="m_{z1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{z1}"><mi data-latex="z">z</mi><mo>⁢</mo><mn data-latex="1">1</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="x">x</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="blue" data-latex="\color{blue}{m_{z2}}"><msub data-latex="m_{z2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{z2}"><mi data-latex="z">z</mi><mo>⁢</mo><mn data-latex="2">2</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="y">y</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="blue" data-latex="\color{blue}{m_{z3}}"><msub data-latex="m_{z3}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{z3}"><mi data-latex="z">z</mi><mo>⁢</mo><mn data-latex="3">3</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="z">z</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="blue" data-latex="\color{blue}{m_{z4}}"><msub data-latex="m_{z4}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{z4}"><mi data-latex="z">z</mi><mo>⁢</mo><mn data-latex="4">4</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="w">w</mi></mrow></mrow></mtd></mtr><mtr><mtd><mrow><mrow><mrow data-mjx-texclass="ORD" data-latex="{m_{w1}}"><msub data-latex="m_{w1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{w1}"><mi data-latex="w">w</mi><mo>⁢</mo><mn data-latex="1">1</mn></mrow></msub></mrow><mo data-latex="\cdot">⋅</mo><mi data-latex="x">x</mi></mrow><mo data-latex="+">+</mo><mrow><mrow data-mjx-texclass="ORD" data-latex="{m_{w2}}"><msub data-latex="m_{w2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{w2}"><mi data-latex="w">w</mi><mo>⁢</mo><mn data-latex="2">2</mn></mrow></msub></mrow><mo data-latex="\cdot">⋅</mo><mi data-latex="y">y</mi></mrow><mo data-latex="+">+</mo><mrow><mrow data-mjx-texclass="ORD" data-latex="{m_{w3}}"><msub data-latex="m_{w3}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{w3}"><mi data-latex="w">w</mi><mo>⁢</mo><mn data-latex="3">3</mn></mrow></msub></mrow><mo data-latex="\cdot">⋅</mo><mi data-latex="z">z</mi></mrow><mo data-latex="+">+</mo><mrow><mrow data-mjx-texclass="ORD" data-latex="{m_{w4}}"><msub data-latex="m_{w4}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{w4}"><mi data-latex="w">w</mi><mo>⁢</mo><mn data-latex="4">4</mn></mrow></msub></mrow><mo data-latex="\cdot">⋅</mo><mi data-latex="w">w</mi></mrow></mrow></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow></math>
                    <section id="projection__matrix__x">
                        <h4>Obliczanie 𝑥′</h4>
                        <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="x'=\color{red}{m_{x1}} \cdot x + \color{red}{m_{x2}} \cdot y + \color{red}{m_{x3}} \cdot z + \color{red}{m_{x4}} \cdot w " display="block"><msup><mi data-latex="x">x</mi><mo data-mjx-alternate="1">′</mo></msup><mo data-latex="=">=</mo><mrow><mrow><mstyle mathcolor="red" data-latex="\color{red}{m_{x1}}"><msub data-latex="m_{x1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x1}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="1">1</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="x">x</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="red" data-latex="\color{red}{m_{x2}}"><msub data-latex="m_{x2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x2}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="2">2</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="y">y</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="red" data-latex="\color{red}{m_{x3}}"><msub data-latex="m_{x3}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x3}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="3">3</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="z">z</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="red" data-latex="\color{red}{m_{x4}}"><msub data-latex="m_{x4}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x4}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="4">4</mn></mrow></msub></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="w">w</mi></mrow></mrow></math></p>
                        <p>Wartość 𝑥′ zależy od wartości 𝑥 oraz <i>left</i> i <i>right</i>. Szersze pole widzenia jest wynikiem większych wartości <i>left</i> i <i>right</i>. Szerokość pola widzenia zmniejsza się wraz z oddalaniem bliższej płaszczyzny odcinania - zwiększaniem się wartości <i>near</i>. Konieczne jest przeskalowanie wartości 𝑥, uwzględniając wszystkie te wartości:</p>
                        <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\color{red}{m_{x1}}=\frac{2 \cdot near}{right - left}" display="block"><mstyle mathcolor="red" data-latex="\color{red}{m_{x1}}"><msub data-latex="m_{x1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x1}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="1">1</mn></mrow></msub></mstyle><mo data-latex="=">=</mo><mfrac data-latex="\frac{2 \cdot near}{right - left}"><mrow data-latex="2 \cdot near"><mn data-latex="2">2</mn><mo data-latex="\cdot">⋅</mo><mrow><mi data-latex="n">n</mi><mo>⁢</mo><mi data-latex="e">e</mi><mo>⁢</mo><mi data-latex="a">a</mi><mo>⁢</mo><mi data-latex="r">r</mi></mrow></mrow><mrow data-latex="right - left"><mrow><mi data-latex="r">r</mi><mo>⁢</mo><mi data-latex="i">i</mi><mo>⁢</mo><mi data-latex="g">g</mi><mo>⁢</mo><mi data-latex="h">h</mi><mo>⁢</mo><mi data-latex="t">t</mi></mrow><mo data-latex="-">−</mo><mrow><mi data-latex="l">l</mi><mo>⁢</mo><mi data-latex="e">e</mi><mo>⁢</mo><mi data-latex="f">f</mi><mo>⁢</mo><mi data-latex="t">t</mi></mrow></mrow></mfrac></math></p>
                        <p>Wartość <i>near</i> jest pomnożona przez 𝟤, ze względu na rozpiętość rzutni od -𝟣 do 𝟣.</p>
                        <p>
                            <span>Wartość 𝑥′ jest niezależna od 𝑦, więc</span>
                            <math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\color{red}{m_{x2}}=0"><mstyle mathcolor="red" data-latex="\color{red}{m_{x2}}"><msub data-latex="m_{x2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x2}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="2">2</mn></mrow></msub></mstyle><mo data-latex="=">=</mo><mn data-latex="0">0</mn></math>
                            <span>.</span>
                        </p>
                        <p>Jeśli suma wartości <i>left</i> i <i>right</i> ≠ 0, oznacza to że obserwator nie patrzy wzdłuż osi 𝑥. Powoduje to, że wartości 𝑥' ulegają przesunięciu które jest proprocjonalne do wartości 𝑧:</p>
                        <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\color{red}{m_{x3}}=\frac{right + left}{right - left}" display="block"><mstyle mathcolor="red" data-latex="\color{red}{m_{x3}}"><msub data-latex="m_{x3}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x3}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="3">3</mn></mrow></msub></mstyle><mo data-latex="=">=</mo><mfrac data-latex="\frac{right + left}{right - left}"><mrow data-latex="right + left"><mrow><mi data-latex="r">r</mi><mo>⁢</mo><mi data-latex="i">i</mi><mo>⁢</mo><mi data-latex="g">g</mi><mo>⁢</mo><mi data-latex="h">h</mi><mo>⁢</mo><mi data-latex="t">t</mi></mrow><mo data-latex="+">+</mo><mrow><mi data-latex="l">l</mi><mo>⁢</mo><mi data-latex="e">e</mi><mo>⁢</mo><mi data-latex="f">f</mi><mo>⁢</mo><mi data-latex="t">t</mi></mrow></mrow><mrow data-latex="right - left"><mrow><mi data-latex="r">r</mi><mo>⁢</mo><mi data-latex="i">i</mi><mo>⁢</mo><mi data-latex="g">g</mi><mo>⁢</mo><mi data-latex="h">h</mi><mo>⁢</mo><mi data-latex="t">t</mi></mrow><mo data-latex="-">−</mo><mrow><mi data-latex="l">l</mi><mo>⁢</mo><mi data-latex="e">e</mi><mo>⁢</mo><mi data-latex="f">f</mi><mo>⁢</mo><mi data-latex="t">t</mi></mrow></mrow></mfrac></math></p>
                        <p>
                            <span>Wartość 𝑥′ jest niezależna od w, więc</span>
                            <math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\color{red}{m_{x4}}=0"><mstyle mathcolor="red" data-latex="\color{red}{m_{x4}}"><msub data-latex="m_{x2}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{x2}"><mi data-latex="x">x</mi><mo>⁢</mo><mn data-latex="4">4</mn></mrow></msub></mstyle><mo data-latex="=">=</mo><mn data-latex="0">0</mn></math>
                            <span>.</span>
                        </p>
                        <p>Podsumowując:</p>
                        <math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="x'=\color{red}{\frac{2 \cdot near}{right - left}} \cdot x + \color{red}{0} \cdot y + \color{red}{\frac{right + left}{right - left}} \cdot z + \color{red}{0} \cdot w " display="block"><msup><mi data-latex="x">x</mi><mo data-mjx-alternate="1">′</mo></msup><mo data-latex="=">=</mo><mrow><mrow><mstyle mathcolor="red" data-latex="\color{red}{\frac{2 \cdot near}{right - left}}"><mfrac data-latex="\frac{2 \cdot near}{right - left}"><mrow data-latex="2 \cdot near"><mn data-latex="2">2</mn><mo data-latex="\cdot">⋅</mo><mrow><mi data-latex="n">n</mi><mo>⁢</mo><mi data-latex="e">e</mi><mo>⁢</mo><mi data-latex="a">a</mi><mo>⁢</mo><mi data-latex="r">r</mi></mrow></mrow><mrow data-latex="right - left"><mrow><mi data-latex="r">r</mi><mo>⁢</mo><mi data-latex="i">i</mi><mo>⁢</mo><mi data-latex="g">g</mi><mo>⁢</mo><mi data-latex="h">h</mi><mo>⁢</mo><mi data-latex="t">t</mi></mrow><mo data-latex="-">−</mo><mrow><mi data-latex="l">l</mi><mo>⁢</mo><mi data-latex="e">e</mi><mo>⁢</mo><mi data-latex="f">f</mi><mo>⁢</mo><mi data-latex="t">t</mi></mrow></mrow></mfrac></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="x">x</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="red" data-latex="\color{red}{0}"><mn data-latex="0">0</mn></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="y">y</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="red" data-latex="\color{red}{\frac{right + left}{right - left}}"><mfrac data-latex="\frac{right + left}{right - left}"><mrow data-latex="right + left"><mrow><mi data-latex="r">r</mi><mo>⁢</mo><mi data-latex="i">i</mi><mo>⁢</mo><mi data-latex="g">g</mi><mo>⁢</mo><mi data-latex="h">h</mi><mo>⁢</mo><mi data-latex="t">t</mi></mrow><mo data-latex="+">+</mo><mrow><mi data-latex="l">l</mi><mo>⁢</mo><mi data-latex="e">e</mi><mo>⁢</mo><mi data-latex="f">f</mi><mo>⁢</mo><mi data-latex="t">t</mi></mrow></mrow><mrow data-latex="right - left"><mrow><mi data-latex="r">r</mi><mo>⁢</mo><mi data-latex="i">i</mi><mo>⁢</mo><mi data-latex="g">g</mi><mo>⁢</mo><mi data-latex="h">h</mi><mo>⁢</mo><mi data-latex="t">t</mi></mrow><mo data-latex="-">−</mo><mrow><mi data-latex="l">l</mi><mo>⁢</mo><mi data-latex="e">e</mi><mo>⁢</mo><mi data-latex="f">f</mi><mo>⁢</mo><mi data-latex="t">t</mi></mrow></mrow></mfrac></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="z">z</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="red" data-latex="\color{red}{0}"><mn data-latex="0">0</mn></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="w">w</mi></mrow></mrow></math>
                    </section>
                    <section id="projection__matrix__y">
                        <h4>Obliczanie 𝑦′</h4>
                        <p>Wszystkie obliczenia dla 𝑦′ są analogiczne jak dla 𝑥′. Z tą różnicą, że zamiast wartości <i>left</i> i <i>right</i> należy uwzględnić wartości <i>top</i> i <i>bottom</i>. W ich wyniku czego otrzymujemy:</p>
                        <math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="x'=\color{green}{0} \cdot x + \color{green}{\frac{2 \cdot near}{top - bottom}} \cdot y + \color{green}{\frac{top + bottom}{top - bottom}} \cdot z + \color{green}{0} \cdot w " display="block"><msup><mi data-latex="x">x</mi><mo data-mjx-alternate="1">′</mo></msup><mo data-latex="=">=</mo><mrow><mrow><mstyle mathcolor="green" data-latex="\color{green}{0}"><mn data-latex="0">0</mn></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="x">x</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="green" data-latex="\color{green}{\frac{2 \cdot near}{top - bottom}}"><mfrac data-latex="\frac{2 \cdot near}{top - bottom}"><mrow data-latex="2 \cdot near"><mn data-latex="2">2</mn><mo data-latex="\cdot">⋅</mo><mrow><mi data-latex="n">n</mi><mo>⁢</mo><mi data-latex="e">e</mi><mo>⁢</mo><mi data-latex="a">a</mi><mo>⁢</mo><mi data-latex="r">r</mi></mrow></mrow><mrow data-latex="top - bottom"><mrow><mi data-latex="t">t</mi><mo>⁢</mo><mi data-latex="o">o</mi><mo>⁢</mo><mi data-latex="p">p</mi></mrow><mo data-latex="-">−</mo><mrow><mi data-latex="b">b</mi><mo>⁢</mo><mi data-latex="o">o</mi><mo>⁢</mo><mi data-latex="t">t</mi><mo>⁢</mo><mi data-latex="t">t</mi><mo>⁢</mo><mi data-latex="o">o</mi><mo>⁢</mo><mi data-latex="m">m</mi></mrow></mrow></mfrac></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="y">y</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="green" data-latex="\color{green}{\frac{top + bottom}{top - bottom}}"><mfrac data-latex="\frac{top + bottom}{top - bottom}"><mrow data-latex="top + bottom"><mrow><mi data-latex="t">t</mi><mo>⁢</mo><mi data-latex="o">o</mi><mo>⁢</mo><mi data-latex="p">p</mi></mrow><mo data-latex="+">+</mo><mrow><mi data-latex="b">b</mi><mo>⁢</mo><mi data-latex="o">o</mi><mo>⁢</mo><mi data-latex="t">t</mi><mo>⁢</mo><mi data-latex="t">t</mi><mo>⁢</mo><mi data-latex="o">o</mi><mo>⁢</mo><mi data-latex="m">m</mi></mrow></mrow><mrow data-latex="top - bottom"><mrow><mi data-latex="t">t</mi><mo>⁢</mo><mi data-latex="o">o</mi><mo>⁢</mo><mi data-latex="p">p</mi></mrow><mo data-latex="-">−</mo><mrow><mi data-latex="b">b</mi><mo>⁢</mo><mi data-latex="o">o</mi><mo>⁢</mo><mi data-latex="t">t</mi><mo>⁢</mo><mi data-latex="t">t</mi><mo>⁢</mo><mi data-latex="o">o</mi><mo>⁢</mo><mi data-latex="m">m</mi></mrow></mrow></mfrac></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="z">z</mi></mrow><mo data-latex="+">+</mo><mrow><mstyle mathcolor="green" data-latex="\color{green}{0}"><mn data-latex="0">0</mn></mstyle><mo data-latex="\cdot">⋅</mo><mi data-latex="w">w</mi></mrow></mrow></math>
                    </section>
                    <section id="projection__matrix__z">
                        <h4>Obliczanie 𝑧′</h4>
                        <p>
                            <span>Wartość 𝑧′ jest niezależna od 𝑥, więc</span>
                            <math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\color{blue}{m_{z1}}=0"><mstyle mathcolor="blue" data-latex="\color{blue}{m_{z1}}"><msub data-latex="m_{z1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{z1}"><mi data-latex="z">z</mi><mo>⁢</mo><mn data-latex="1">1</mn></mrow></msub></mstyle><mo data-latex="=">=</mo><mn data-latex="0">0</mn></math>
                            <span>.</span>
                        </p>
                        <p>
                            <span>Wartość 𝑧′ jest niezależna od 𝑦, więc</span>
                            <math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\color{blue}{m_{z2}}=0"><mstyle mathcolor="blue" data-latex="\color{blue}{m_{z1}}"><msub data-latex="m_{z1}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{z1}"><mi data-latex="z">z</mi><mo>⁢</mo><mn data-latex="2">2</mn></mrow></msub></mstyle><mo data-latex="=">=</mo><mn data-latex="0">0</mn></math>
                            <span>.</span>
                        </p>
                        <p>Wartość 𝑧′ jest zależna od 𝑧.</p>
                        <p>Współczesne implementacje takie jak OpenGL czy DirectX zakładaja, że współrzędne jednorodne będące rezultatem rzutowania, po przekształceniu do współrzędnych kartezjańskich, będą znajdować się w tak zwanej przestrzeni NDC (Normalized Device Coordinates). Jest to przestrzeń w formie sześcianu ograniczonego wartościami od -𝟣 do 𝟣 na każdej z osi współrzędnych.</p>
                        <p>Przekształcenie którego szukamy musi być liniowe, a więc postaci 𝑧′ = 𝑎 ⋅ 𝑧 + 𝑏, gdzie 𝑎 i 𝑏 są współczynnikami, które należy wyznaczyć.</p>
                        <p>Wiemy, że dla 𝑧 = <i>near</i>, 𝑧′ = -𝟣, więc:</p>
                        <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="-1=a \cdot \mathup{near} + b " display="block"><mrow><mo data-latex="-">−</mo><mn data-latex="1">1</mn></mrow><mo data-latex="=">=</mo><mrow><mrow><mi data-latex="a">a</mi><mo data-latex="\cdot">⋅</mo><mrow data-mjx-texclass="ORD" data-latex="\mathup{near}"><mi data-mjx-auto-op="false" data-latex="near">near</mi></mrow></mrow><mo data-latex="+">+</mo><mi data-latex="b">b</mi></mrow></math></p>
                        <p>Dla 𝑧 = <i>fat</i>, 𝑧′ = 𝟣, więc:</p>
                        <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="1=a \cdot \mathup{far} + b " display="block"><mn data-latex="1">1</mn><mo data-latex="=">=</mo><mrow><mrow><mi data-latex="a">a</mi><mo data-latex="\cdot">⋅</mo><mrow data-mjx-texclass="ORD" data-latex="\mathup{far}"><mi data-mjx-auto-op="false" data-latex="far">far</mi></mrow></mrow><mo data-latex="+">+</mo><mi data-latex="b">b</mi></mrow></math></p>
                        <p>Otrzymujemy prosty układ dwóch równań liniowych z dwoma niewiadomymi 𝑎 i 𝑏. W jego rozwiązaniu otrzymujemy:</p>
                        <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="a=\frac{2}{far - near}" display="block"><mi data-latex="a">a</mi><mo data-latex="=">=</mo><mfrac data-latex="\frac{2}{far - near}"><mn data-latex="2">2</mn><mrow data-latex="far - near"><mrow><mi data-latex="f">f</mi><mo>⁢</mo><mi data-latex="a">a</mi><mo>⁢</mo><mi data-latex="r">r</mi></mrow><mo data-latex="-">−</mo><mrow><mi data-latex="n">n</mi><mo>⁢</mo><mi data-latex="e">e</mi><mo>⁢</mo><mi data-latex="a">a</mi><mo>⁢</mo><mi data-latex="r">r</mi></mrow></mrow></mfrac></math></p>
                        <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="b=\frac{-far - near}{far - near}" display="block"><mi data-latex="b">b</mi><mo data-latex="=">=</mo><mfrac data-latex="\frac{-far - near}{far - near}"><mrow data-latex="-far - near"><mrow><mo data-latex="-">−</mo><mrow><mi data-latex="f">f</mi><mo>⁢</mo><mi data-latex="a">a</mi><mo>⁢</mo><mi data-latex="r">r</mi></mrow></mrow><mo data-latex="-">−</mo><mrow><mi data-latex="n">n</mi><mo>⁢</mo><mi data-latex="e">e</mi><mo>⁢</mo><mi data-latex="a">a</mi><mo>⁢</mo><mi data-latex="r">r</mi></mrow></mrow><mrow data-latex="far - near"><mrow><mi data-latex="f">f</mi><mo>⁢</mo><mi data-latex="a">a</mi><mo>⁢</mo><mi data-latex="r">r</mi></mrow><mo data-latex="-">−</mo><mrow><mi data-latex="n">n</mi><mo>⁢</mo><mi data-latex="e">e</mi><mo>⁢</mo><mi data-latex="a">a</mi><mo>⁢</mo><mi data-latex="r">r</mi></mrow></mrow></mfrac></math></p>
                        <p>Znalezione przekształcenie to:</p>
                        <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="z'=\frac{2}{far - near} \cdot z + \frac{-far-near}{far-near}" display="block"><msup><mi data-latex="z">z</mi><mo data-mjx-alternate="1">′</mo></msup><mo data-latex="=">=</mo><mrow><mrow><mfrac data-latex="\frac{2}{far - near}"><mn data-latex="2">2</mn><mrow data-latex="far - near"><mrow><mi data-latex="f">f</mi><mo>⁢</mo><mi data-latex="a">a</mi><mo>⁢</mo><mi data-latex="r">r</mi></mrow><mo data-latex="-">−</mo><mrow><mi data-latex="n">n</mi><mo>⁢</mo><mi data-latex="e">e</mi><mo>⁢</mo><mi data-latex="a">a</mi><mo>⁢</mo><mi data-latex="r">r</mi></mrow></mrow></mfrac><mo data-latex="\cdot">⋅</mo><mi data-latex="z">z</mi></mrow><mo data-latex="+">+</mo><mfrac data-latex="\frac{-far-near}{far-near}"><mrow data-latex="-far-near"><mrow><mo data-latex="-">−</mo><mrow><mi data-latex="f">f</mi><mo>⁢</mo><mi data-latex="a">a</mi><mo>⁢</mo><mi data-latex="r">r</mi></mrow></mrow><mo data-latex="-">−</mo><mrow><mi data-latex="n">n</mi><mo>⁢</mo><mi data-latex="e">e</mi><mo>⁢</mo><mi data-latex="a">a</mi><mo>⁢</mo><mi data-latex="r">r</mi></mrow></mrow><mrow data-latex="far-near"><mrow><mi data-latex="f">f</mi><mo>⁢</mo><mi data-latex="a">a</mi><mo>⁢</mo><mi data-latex="r">r</mi></mrow><mo data-latex="-">−</mo><mrow><mi data-latex="n">n</mi><mo>⁢</mo><mi data-latex="e">e</mi><mo>⁢</mo><mi data-latex="a">a</mi><mo>⁢</mo><mi data-latex="r">r</mi></mrow></mrow></mfrac></mrow></math></p>
                        <p>
                            <span>Składniki sumy będącej przekształceniem musimy zapisać w dwóch komórkach macierzy</span>
                            <math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\color{blue}{m_{z3}}, \color{blue}{m_{z4}}"><mstyle mathcolor="blue" data-latex="\color{blue}{m_{z3}}"><msub data-latex="m_{z3}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{z3}"><mi data-latex="z">z</mi><mo>⁢</mo><mn data-latex="3">3</mn></mrow></msub></mstyle><mo data-latex=",">,</mo><mstyle mathcolor="blue" data-latex="\color{blue}{m_{z4}}"><msub data-latex="m_{z4}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{z4}"><mi data-latex="z">z</mi><mo>⁢</mo><mn data-latex="4">4</mn></mrow></msub></mstyle></math>
                            <span>. Okazuje się tutaj pomocna współrzędna 𝑤 równa 𝟣, dzięki której w czwartej kolumnie macierzy możemy umieścić formułę na jeden ze składników sumy. Podsumowując:</span>
                        </p>
                        <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\color{blue}{m_{z3}}=-(\mathup{far} + \mathup{near}) / (\mathup{far} - \mathup{near})" display="block"><mstyle mathcolor="blue" data-latex="\color{blue}{m_{z3}}"><msub data-latex="m_{z3}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{z3}"><mi data-latex="z">z</mi><mo>⁢</mo><mn data-latex="3">3</mn></mrow></msub></mstyle><mo data-latex="=">=</mo><mrow><mrow><mo data-latex="-">−</mo><mrow><mo data-latex="(" stretchy="false">(</mo><mrow><mrow data-mjx-texclass="ORD" data-latex="\mathup{far}"><mi data-mjx-auto-op="false" data-latex="far">far</mi></mrow><mo data-latex="+">+</mo><mrow data-mjx-texclass="ORD" data-latex="\mathup{near}"><mi data-mjx-auto-op="false" data-latex="near">near</mi></mrow></mrow><mo data-latex=")" stretchy="false">)</mo></mrow></mrow><mrow data-mjx-texclass="ORD"><mo data-latex="/">/</mo></mrow><mrow><mo data-latex="(" stretchy="false">(</mo><mrow><mrow data-mjx-texclass="ORD" data-latex="\mathup{far}"><mi data-mjx-auto-op="false" data-latex="far">far</mi></mrow><mo data-latex="-">−</mo><mrow data-mjx-texclass="ORD" data-latex="\mathup{near}"><mi data-mjx-auto-op="false" data-latex="near">near</mi></mrow></mrow><mo data-latex=")" stretchy="false">)</mo></mrow></mrow></math></p>
                        <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\color{blue}{m_{z4}}=-\frac{2 \cdot \mathup{near} \cdot \mathup{far}}{\mathup{far} - \mathup{near}}" display="block"><mstyle mathcolor="blue" data-latex="\color{blue}{m_{z4}}"><msub data-latex="m_{z4}"><mi data-latex="m">m</mi><mrow data-mjx-texclass="ORD" data-latex="{z4}"><mi data-latex="z">z</mi><mo>⁢</mo><mn data-latex="4">4</mn></mrow></msub></mstyle><mo data-latex="=">=</mo><mrow><mo data-latex="-">−</mo><mfrac data-latex="\frac{2 \cdot \mathup{near} \cdot \mathup{far}}{\mathup{far} - \mathup{near}}"><mrow data-latex="2 \cdot \mathup{near} \cdot \mathup{far}"><mn data-latex="2">2</mn><mo data-latex="\cdot">⋅</mo><mrow data-mjx-texclass="ORD" data-latex="\mathup{near}"><mi data-mjx-auto-op="false" data-latex="near">near</mi></mrow><mo data-latex="\cdot">⋅</mo><mrow data-mjx-texclass="ORD" data-latex="\mathup{far}"><mi data-mjx-auto-op="false" data-latex="far">far</mi></mrow></mrow><mrow data-latex="\mathup{far} - \mathup{near}"><mrow data-mjx-texclass="ORD" data-latex="\mathup{far}"><mi data-mjx-auto-op="false" data-latex="far">far</mi></mrow><mo data-latex="-">−</mo><mrow data-mjx-texclass="ORD" data-latex="\mathup{near}"><mi data-mjx-auto-op="false" data-latex="near">near</mi></mrow></mrow></mfrac></mrow></math></p>
                    </section>
                    <section id="projection__matrix__w">
                        <h4>Obliczanie 𝑤′</h4>
                        <p>Wartość 𝑤 służy jedynie do przechowywania oryginalnej wartości 𝑧, która stanowi komponent jednorodny wynikowego wektora.</p>
                        <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="w'={0} \cdot x + 0 \cdot y + -1 \cdot z +{0} \cdot w " display="block"><msup><mi data-latex="w">w</mi><mo data-mjx-alternate="1">′</mo></msup><mo data-latex="=">=</mo><mrow><mrow><mrow data-mjx-texclass="ORD" data-latex="{0}"><mn data-latex="0">0</mn></mrow><mo data-latex="\cdot">⋅</mo><mi data-latex="x">x</mi></mrow><mo data-latex="+">+</mo><mrow><mn data-latex="0">0</mn><mo data-latex="\cdot">⋅</mo><mi data-latex="y">y</mi></mrow><mo data-latex="+">+</mo><mrow><mrow><mo data-latex="-">−</mo><mn data-latex="1">1</mn></mrow><mo data-latex="\cdot">⋅</mo><mi data-latex="z">z</mi></mrow><mo data-latex="+">+</mo><mrow><mrow data-mjx-texclass="ORD" data-latex="{0}"><mn data-latex="0">0</mn></mrow><mo data-latex="\cdot">⋅</mo><mi data-latex="w">w</mi></mrow></mrow></math></p>
                        <p>Wartość ujemna pojawia się dla zgodności z OpenGL, w którym obserwator spogląda w kierunku ujemnym osi 𝖹.</p>
                    </section>
                    <section id="projection__matrix__summary">
                        <h4>Konstrukcja macierzy końcowa</h4>
                        <p>Zbierając obliczenia dla wszystkich wierszy w jedną macierz otrzymujemy:</p>
                        <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\begin{bmatrix} \frac{2 \cdot \mathup{near}}{\mathup{right} - \mathup{left}} &amp; 0 &amp; \frac{\mathup{right} + \mathup{left}}{\mathup{right} - \mathup{left}} &amp; 0 \\ 0 &amp; \frac{2 \cdot \mathup{near}}{\mathup{top} - \mathup{bottom}} &amp; \frac{\mathup{top} + \mathup{bottom}}{\mathup{top} - \mathup{bottom}} &amp; 0 \\ 0 &amp; 0 &amp; -\frac{\mathup{far} + \mathup{near}}{\mathup{far} +-\mathup{near}} &amp; -\frac{2 \cdot \mathup{near} \cdot \mathup{far}}{\mathup{far} - \mathup{near}} \\ 0 &amp; 0 &amp; -1 &amp; 0 \end{bmatrix}" display="block"><mrow data-mjx-texclass="INNER" data-latex-item="{bmatrix}" data-latex="\begin{bmatrix} \frac{2 \cdot \mathup{near}}{\mathup{right} - \mathup{left}} &amp; 0 &amp; \frac{\mathup{right} + \mathup{left}}{\mathup{right} - \mathup{left}} &amp; 0 \\ 0 &amp; \frac{2 \cdot \mathup{near}}{\mathup{top} - \mathup{bottom}} &amp; \frac{\mathup{top} + \mathup{bottom}}{\mathup{top} - \mathup{bottom}} &amp; 0 \\ 0 &amp; 0 &amp; -\frac{\mathup{far} + \mathup{near}}{\mathup{far} +-\mathup{near}} &amp; -\frac{2 \cdot \mathup{near} \cdot \mathup{far}}{\mathup{far} - \mathup{near}} \\ 0 &amp; 0 &amp; -1 &amp; 0 \end{bmatrix}"><mo data-mjx-texclass="OPEN">[</mo><mtable columnspacing="1em" rowspacing="4pt"><mtr><mtd><mfrac data-latex="\frac{2 \cdot \mathup{near}}{\mathup{right} - \mathup{left}}"><mrow data-latex="2 \cdot \mathup{near}"><mn data-latex="2">2</mn><mo data-latex="\cdot">⋅</mo><mrow data-mjx-texclass="ORD" data-latex="\mathup{near}"><mi data-mjx-auto-op="false" data-latex="near">near</mi></mrow></mrow><mrow data-latex="\mathup{right} - \mathup{left}"><mrow data-mjx-texclass="ORD" data-latex="\mathup{right}"><mi data-mjx-auto-op="false" data-latex="right">right</mi></mrow><mo data-latex="-">−</mo><mrow data-mjx-texclass="ORD" data-latex="\mathup{left}"><mi data-mjx-auto-op="false" data-latex="left">left</mi></mrow></mrow></mfrac></mtd><mtd><mn data-latex="0">0</mn></mtd><mtd><mfrac data-latex="\frac{\mathup{right} + \mathup{left}}{\mathup{right} - \mathup{left}}"><mrow data-latex="\mathup{right} + \mathup{left}"><mrow data-mjx-texclass="ORD" data-latex="\mathup{right}"><mi data-mjx-auto-op="false" data-latex="right">right</mi></mrow><mo data-latex="+">+</mo><mrow data-mjx-texclass="ORD" data-latex="\mathup{left}"><mi data-mjx-auto-op="false" data-latex="left">left</mi></mrow></mrow><mrow data-latex="\mathup{right} - \mathup{left}"><mrow data-mjx-texclass="ORD" data-latex="\mathup{right}"><mi data-mjx-auto-op="false" data-latex="right">right</mi></mrow><mo data-latex="-">−</mo><mrow data-mjx-texclass="ORD" data-latex="\mathup{left}"><mi data-mjx-auto-op="false" data-latex="left">left</mi></mrow></mrow></mfrac></mtd><mtd><mn data-latex="0">0</mn></mtd></mtr><mtr><mtd><mn data-latex="0">0</mn></mtd><mtd><mfrac data-latex="\frac{2 \cdot \mathup{near}}{\mathup{top} - \mathup{bottom}}"><mrow data-latex="2 \cdot \mathup{near}"><mn data-latex="2">2</mn><mo data-latex="\cdot">⋅</mo><mrow data-mjx-texclass="ORD" data-latex="\mathup{near}"><mi data-mjx-auto-op="false" data-latex="near">near</mi></mrow></mrow><mrow data-latex="\mathup{top} - \mathup{bottom}"><mrow data-mjx-texclass="ORD" data-latex="\mathup{top}"><mi data-mjx-auto-op="false" data-latex="top">top</mi></mrow><mo data-latex="-">−</mo><mrow data-mjx-texclass="ORD" data-latex="\mathup{bottom}"><mi data-mjx-auto-op="false" data-latex="bottom">bottom</mi></mrow></mrow></mfrac></mtd><mtd><mfrac data-latex="\frac{\mathup{top} + \mathup{bottom}}{\mathup{top} - \mathup{bottom}}"><mrow data-latex="\mathup{top} + \mathup{bottom}"><mrow data-mjx-texclass="ORD" data-latex="\mathup{top}"><mi data-mjx-auto-op="false" data-latex="top">top</mi></mrow><mo data-latex="+">+</mo><mrow data-mjx-texclass="ORD" data-latex="\mathup{bottom}"><mi data-mjx-auto-op="false" data-latex="bottom">bottom</mi></mrow></mrow><mrow data-latex="\mathup{top} - \mathup{bottom}"><mrow data-mjx-texclass="ORD" data-latex="\mathup{top}"><mi data-mjx-auto-op="false" data-latex="top">top</mi></mrow><mo data-latex="-">−</mo><mrow data-mjx-texclass="ORD" data-latex="\mathup{bottom}"><mi data-mjx-auto-op="false" data-latex="bottom">bottom</mi></mrow></mrow></mfrac></mtd><mtd><mn data-latex="0">0</mn></mtd></mtr><mtr><mtd><mn data-latex="0">0</mn></mtd><mtd><mn data-latex="0">0</mn></mtd><mtd><mrow><mo data-latex="-">−</mo><mfrac data-latex="\frac{\mathup{far} + \mathup{near}}{\mathup{far} +-\mathup{near}}"><mrow data-latex="\mathup{far} + \mathup{near}"><mrow data-mjx-texclass="ORD" data-latex="\mathup{far}"><mi data-mjx-auto-op="false" data-latex="far">far</mi></mrow><mo data-latex="+">+</mo><mrow data-mjx-texclass="ORD" data-latex="\mathup{near}"><mi data-mjx-auto-op="false" data-latex="near">near</mi></mrow></mrow><mrow data-latex="\mathup{far} +-\mathup{near}"><mrow data-mjx-texclass="ORD" data-latex="\mathup{far}"><mi data-mjx-auto-op="false" data-latex="far">far</mi></mrow><mo data-latex="+">+</mo><mrow><mo data-latex="-">−</mo><mrow data-mjx-texclass="ORD" data-latex="\mathup{near}"><mi data-mjx-auto-op="false" data-latex="near">near</mi></mrow></mrow></mrow></mfrac></mrow></mtd><mtd><mrow><mo data-latex="-">−</mo><mfrac data-latex="\frac{2 \cdot \mathup{near} \cdot \mathup{far}}{\mathup{far} - \mathup{near}}"><mrow data-latex="2 \cdot \mathup{near} \cdot \mathup{far}"><mn data-latex="2">2</mn><mo data-latex="\cdot">⋅</mo><mrow data-mjx-texclass="ORD" data-latex="\mathup{near}"><mi data-mjx-auto-op="false" data-latex="near">near</mi></mrow><mo data-latex="\cdot">⋅</mo><mrow data-mjx-texclass="ORD" data-latex="\mathup{far}"><mi data-mjx-auto-op="false" data-latex="far">far</mi></mrow></mrow><mrow data-latex="\mathup{far} - \mathup{near}"><mrow data-mjx-texclass="ORD" data-latex="\mathup{far}"><mi data-mjx-auto-op="false" data-latex="far">far</mi></mrow><mo data-latex="-">−</mo><mrow data-mjx-texclass="ORD" data-latex="\mathup{near}"><mi data-mjx-auto-op="false" data-latex="near">near</mi></mrow></mrow></mfrac></mrow></mtd></mtr><mtr><mtd><mn data-latex="0">0</mn></mtd><mtd><mn data-latex="0">0</mn></mtd><mtd><mrow><mo data-latex="-">−</mo><mn data-latex="1">1</mn></mrow></mtd><mtd><mn data-latex="0">0</mn></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE">]</mo></mrow></math></p>
                        <p>Kod metody <code>createPerspectiveProjection</code> konstrującej macierz projekcji:</p>
                        <div class="content-generated-from-code" module="matrix4" function="Matrix4.createPerspectiveProjection" style="height: 45em;"></div>
                        <p>Kod programu używający metody <code>createPerspectiveProjection</code>:</p>
                        <div class="code-with-output">
                            <div class="content-generated-from-code" module="projection" function="exampleOfPerspectiveProjection" output=":parent canvas" style="height: 37em;"></div>
                            <div><canvas width="400" height="400"></canvas></div>
                        </div>
                    </section>
                </section>
            </section>
            <hr>
            <section id="triangle_rasterization">
                <h2>Rasteryzacja</h2>
                <p>Rasteryzacja to proces konwersji trójkątów, na piksele na ekranie. Kluczowym narzędziem używanym w tym procesie są współrzędne barycentryczne.</p>
                <section id="triangle_rasterization__barycentric">
                    <h3>Współrzędne barycentryczne</h3>
                    <p>Współrzędne barycentryczne punktu 𝑃 dla trójkąta o wierzchołkach w punktach 𝐴, 𝐵, 𝐶, to współczynniki α, β, γ, które wskazują, w jakim stopniu każdy z wierzchołków trójkąta wpływa na położenie punktu 𝑃 wewnątrz tego trójkąta:</p>
                    <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="P=\alpha A + \beta B + \gamma C" display="block"><mi data-latex="P">P</mi><mo data-latex="=">=</mo><mrow><mrow><mi data-latex="\alpha">α</mi><mo>⁢</mo><mi data-latex="A">A</mi></mrow><mo data-latex="+">+</mo><mrow><mi data-latex="\beta">β</mi><mo>⁢</mo><mi data-latex="B">B</mi></mrow><mo data-latex="+">+</mo><mrow><mi data-latex="\gamma">γ</mi><mo>⁢</mo><mi data-latex="C">C</mi></mrow></mrow></math></p>
                    <p>Współczynniki (α, β, γ) mają następujące własności:</p>
                    <ul>
                        <li>α + β + γ = 𝟣</li>
                        <li>Jeśli α, β, γ &gt; 𝟢, to punkt 𝑃 leży wewnątrz trójkąta.</li>
                        <li>Jeśli dowolny współczynnik &lt; 𝟢, to punkt poza trójkątem.</li>
                    </ul>
                    <p>Współrzędne barycentryczne pozwalają na interpolację wartości. Przykładowo jeśli każdemu z wierzchołków przypiszemy kolor, to możemy obliczyć kolor każdego punktu wewnątrz trójkąta uzyskując płynne gradientowe przejście pomiędzy kolorami wierzchołków:</p>
                    <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="P_{color}=\alpha \cdot A_{color} + \beta \cdot B_{color} + \gamma \cdot C_{color}" display="block"><msub data-latex="P_{c o l o r}"><mi data-latex="P">P</mi><mrow data-mjx-texclass="ORD" data-latex="{c o l o r}"><mi data-latex="c">c</mi><mo>⁢</mo><mi data-latex="o">o</mi><mo>⁢</mo><mi data-latex="l">l</mi><mo>⁢</mo><mi data-latex="o">o</mi><mo>⁢</mo><mi data-latex="r">r</mi></mrow></msub><mo data-latex="=">=</mo><mrow><mrow><mi data-latex="\alpha">α</mi><mo data-latex="\cdot">⋅</mo><msub data-latex="A_{c o l o r}"><mi data-latex="A">A</mi><mrow data-mjx-texclass="ORD" data-latex="{c o l o r}"><mi data-latex="c">c</mi><mo>⁢</mo><mi data-latex="o">o</mi><mo>⁢</mo><mi data-latex="l">l</mi><mo>⁢</mo><mi data-latex="o">o</mi><mo>⁢</mo><mi data-latex="r">r</mi></mrow></msub></mrow><mo data-latex="+">+</mo><mrow><mi data-latex="\beta">β</mi><mo data-latex="\cdot">⋅</mo><msub data-latex="B_{c o l o r}"><mi data-latex="B">B</mi><mrow data-mjx-texclass="ORD" data-latex="{c o l o r}"><mi data-latex="c">c</mi><mo>⁢</mo><mi data-latex="o">o</mi><mo>⁢</mo><mi data-latex="l">l</mi><mo>⁢</mo><mi data-latex="o">o</mi><mo>⁢</mo><mi data-latex="r">r</mi></mrow></msub></mrow><mo data-latex="+">+</mo><mrow><mi data-latex="\gamma">γ</mi><mo data-latex="\cdot">⋅</mo><msub data-latex="C_{c o l o r}"><mi data-latex="C">C</mi><mrow data-mjx-texclass="ORD" data-latex="{c o l o r}"><mi data-latex="c">c</mi><mo>⁢</mo><mi data-latex="o">o</mi><mo>⁢</mo><mi data-latex="l">l</mi><mo>⁢</mo><mi data-latex="o">o</mi><mo>⁢</mo><mi data-latex="r">r</mi></mrow></msub></mrow></mrow></math></p>
                    <p>Współrzędne barycentryczne są proporcjonalne do pól trójkątów utworzonych przez punkt 𝑃 z wierzchołkami trójkąta.</p>
                    <img src="./images/triangle.svg" style="max-height: 25em;">
                    <p>Pole trójkąta 𝐴𝐵𝐶 wynosi:</p>
                    <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="P_{ABC}=\frac{1}{2} \Bigl|(B_x - A_x)(C_y - A_y) - (C_x - A_x)(B_y - A_y) \Bigr|" display="block"><msub data-latex="P_{A B C}"><mi data-latex="P">P</mi><mrow data-mjx-texclass="ORD" data-latex="{A B C}"><mi data-latex="A">A</mi><mo>⁢</mo><mi data-latex="B">B</mi><mo>⁢</mo><mi data-latex="C">C</mi></mrow></msub><mo data-latex="=">=</mo><mrow><mfrac data-latex="\frac{1}{2}"><mn data-latex="1">1</mn><mn data-latex="2">2</mn></mfrac><mo>⁢</mo><mrow><mrow data-mjx-texclass="OPEN" data-latex="\Bigl|"><mo minsize="1.623em" maxsize="1.623em">|</mo></mrow><mrow><mrow><mrow><mo data-latex="(" stretchy="false">(</mo><mrow><msub data-latex="B_x"><mi data-latex="B">B</mi><mi data-latex="x">x</mi></msub><mo data-latex="-">−</mo><msub data-latex="A_x"><mi data-latex="A">A</mi><mi data-latex="x">x</mi></msub></mrow><mo data-latex=")" stretchy="false">)</mo></mrow><mo>⁢</mo><mrow><mo data-latex="(" stretchy="false">(</mo><mrow><msub data-latex="C_y"><mi data-latex="C">C</mi><mi data-latex="y">y</mi></msub><mo data-latex="-">−</mo><msub data-latex="A_y"><mi data-latex="A">A</mi><mi data-latex="y">y</mi></msub></mrow><mo data-latex=")" stretchy="false">)</mo></mrow></mrow><mo data-latex="-">−</mo><mrow><mrow><mo data-latex="(" stretchy="false">(</mo><mrow><msub data-latex="C_x"><mi data-latex="C">C</mi><mi data-latex="x">x</mi></msub><mo data-latex="-">−</mo><msub data-latex="A_x"><mi data-latex="A">A</mi><mi data-latex="x">x</mi></msub></mrow><mo data-latex=")" stretchy="false">)</mo></mrow><mo>⁢</mo><mrow><mo data-latex="(" stretchy="false">(</mo><mrow><msub data-latex="B_y"><mi data-latex="B">B</mi><mi data-latex="y">y</mi></msub><mo data-latex="-">−</mo><msub data-latex="A_y"><mi data-latex="A">A</mi><mi data-latex="y">y</mi></msub></mrow><mo data-latex=")" stretchy="false">)</mo></mrow></mrow></mrow><mrow data-mjx-texclass="CLOSE" data-latex="\Bigr|"><mo minsize="1.623em" maxsize="1.623em">|</mo></mrow></mrow></mrow></math></p>
                    <p>Wartości współrzędnych barycentrycznych na podstawie pola trójkąta wynoszą odpowiednio:</p>
                    <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\alpha=\frac{P_{PBC}}{P_{ABC}}=\frac{(B_x - P_x)(C_y - P_y) - (Cx - P_x)(B_y - P_y)}{(B_x - A_x)(C_y - A_y) - (C_x - A_x)(B_y - A_y)}" display="block"><mi data-latex="\alpha">α</mi><mo data-latex="=">=</mo><mfrac data-latex="\frac{P_{PBC}}{P_{ABC}}"><msub data-latex="P_{PBC}"><mi data-latex="P">P</mi><mrow data-mjx-texclass="ORD" data-latex="{P B C}"><mi data-latex="P">P</mi><mo>⁢</mo><mi data-latex="B">B</mi><mo>⁢</mo><mi data-latex="C">C</mi></mrow></msub><msub data-latex="P_{ABC}"><mi data-latex="P">P</mi><mrow data-mjx-texclass="ORD" data-latex="{A B C}"><mi data-latex="A">A</mi><mo>⁢</mo><mi data-latex="B">B</mi><mo>⁢</mo><mi data-latex="C">C</mi></mrow></msub></mfrac><mo data-latex="=">=</mo><mfrac data-latex="\frac{(B_x - P_x)(C_y - P_y) - (Cx - P_x)(B_y - P_y)}{(B_x - A_x)(C_y - A_y) - (C_x - A_x)(B_y - A_y)}"><mrow data-latex="(B_x - P_x)(C_y - P_y) - (Cx - P_x)(B_y - P_y)"><mrow><mrow><mo data-latex="(" stretchy="false">(</mo><mrow><msub data-latex="B_x"><mi data-latex="B">B</mi><mi data-latex="x">x</mi></msub><mo data-latex="-">−</mo><msub data-latex="P_x"><mi data-latex="P">P</mi><mi data-latex="x">x</mi></msub></mrow><mo data-latex=")" stretchy="false">)</mo></mrow><mo>⁢</mo><mrow><mo data-latex="(" stretchy="false">(</mo><mrow><msub data-latex="C_y"><mi data-latex="C">C</mi><mi data-latex="y">y</mi></msub><mo data-latex="-">−</mo><msub data-latex="P_y"><mi data-latex="P">P</mi><mi data-latex="y">y</mi></msub></mrow><mo data-latex=")" stretchy="false">)</mo></mrow></mrow><mo data-latex="-">−</mo><mrow><mrow><mo data-latex="(" stretchy="false">(</mo><mrow><mrow><mi data-latex="C">C</mi><mo>⁢</mo><mi data-latex="x">x</mi></mrow><mo data-latex="-">−</mo><msub data-latex="P_x"><mi data-latex="P">P</mi><mi data-latex="x">x</mi></msub></mrow><mo data-latex=")" stretchy="false">)</mo></mrow><mo>⁢</mo><mrow><mo data-latex="(" stretchy="false">(</mo><mrow><msub data-latex="B_y"><mi data-latex="B">B</mi><mi data-latex="y">y</mi></msub><mo data-latex="-">−</mo><msub data-latex="P_y"><mi data-latex="P">P</mi><mi data-latex="y">y</mi></msub></mrow><mo data-latex=")" stretchy="false">)</mo></mrow></mrow></mrow><mrow data-latex="(B_x - A_x)(C_y - A_y) - (C_x - A_x)(B_y - A_y)"><mrow><mrow><mo data-latex="(" stretchy="false">(</mo><mrow><msub data-latex="B_x"><mi data-latex="B">B</mi><mi data-latex="x">x</mi></msub><mo data-latex="-">−</mo><msub data-latex="A_x"><mi data-latex="A">A</mi><mi data-latex="x">x</mi></msub></mrow><mo data-latex=")" stretchy="false">)</mo></mrow><mo>⁢</mo><mrow><mo data-latex="(" stretchy="false">(</mo><mrow><msub data-latex="C_y"><mi data-latex="C">C</mi><mi data-latex="y">y</mi></msub><mo data-latex="-">−</mo><msub data-latex="A_y"><mi data-latex="A">A</mi><mi data-latex="y">y</mi></msub></mrow><mo data-latex=")" stretchy="false">)</mo></mrow></mrow><mo data-latex="-">−</mo><mrow><mrow><mo data-latex="(" stretchy="false">(</mo><mrow><msub data-latex="C_x"><mi data-latex="C">C</mi><mi data-latex="x">x</mi></msub><mo data-latex="-">−</mo><msub data-latex="A_x"><mi data-latex="A">A</mi><mi data-latex="x">x</mi></msub></mrow><mo data-latex=")" stretchy="false">)</mo></mrow><mo>⁢</mo><mrow><mo data-latex="(" stretchy="false">(</mo><mrow><msub data-latex="B_y"><mi data-latex="B">B</mi><mi data-latex="y">y</mi></msub><mo data-latex="-">−</mo><msub data-latex="A_y"><mi data-latex="A">A</mi><mi data-latex="y">y</mi></msub></mrow><mo data-latex=")" stretchy="false">)</mo></mrow></mrow></mrow></mfrac></math></p>
                    <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\beta=\frac{P_{PCA}}{P_{ABC}}=\frac{(C_x - P_x)(A_y - P_y) - (Ax - P_x)(C_y - P_y)}{(B_x - A_x)(C_y - A_y) - (C_x - A_x)(B_y - A_y)}" display="block"><mi data-latex="\beta">β</mi><mo data-latex="=">=</mo><mfrac data-latex="\frac{P_{PCA}}{P_{ABC}}"><msub data-latex="P_{PCA}"><mi data-latex="P">P</mi><mrow data-mjx-texclass="ORD" data-latex="{P C A}"><mi data-latex="P">P</mi><mo>⁢</mo><mi data-latex="C">C</mi><mo>⁢</mo><mi data-latex="A">A</mi></mrow></msub><msub data-latex="P_{ABC}"><mi data-latex="P">P</mi><mrow data-mjx-texclass="ORD" data-latex="{A B C}"><mi data-latex="A">A</mi><mo>⁢</mo><mi data-latex="B">B</mi><mo>⁢</mo><mi data-latex="C">C</mi></mrow></msub></mfrac><mo data-latex="=">=</mo><mfrac data-latex="\frac{(C_x - P_x)(A_y - P_y) - (Ax - P_x)(C_y - P_y)}{(B_x - A_x)(C_y - A_y) - (C_x - A_x)(B_y - A_y)}"><mrow data-latex="(C_x - P_x)(A_y - P_y) - (Ax - P_x)(C_y - P_y)"><mrow><mrow><mo data-latex="(" stretchy="false">(</mo><mrow><msub data-latex="C_x"><mi data-latex="C">C</mi><mi data-latex="x">x</mi></msub><mo data-latex="-">−</mo><msub data-latex="P_x"><mi data-latex="P">P</mi><mi data-latex="x">x</mi></msub></mrow><mo data-latex=")" stretchy="false">)</mo></mrow><mo>⁢</mo><mrow><mo data-latex="(" stretchy="false">(</mo><mrow><msub data-latex="A_y"><mi data-latex="A">A</mi><mi data-latex="y">y</mi></msub><mo data-latex="-">−</mo><msub data-latex="P_y"><mi data-latex="P">P</mi><mi data-latex="y">y</mi></msub></mrow><mo data-latex=")" stretchy="false">)</mo></mrow></mrow><mo data-latex="-">−</mo><mrow><mrow><mo data-latex="(" stretchy="false">(</mo><mrow><mrow><mi data-latex="A">A</mi><mo>⁢</mo><mi data-latex="x">x</mi></mrow><mo data-latex="-">−</mo><msub data-latex="P_x"><mi data-latex="P">P</mi><mi data-latex="x">x</mi></msub></mrow><mo data-latex=")" stretchy="false">)</mo></mrow><mo>⁢</mo><mrow><mo data-latex="(" stretchy="false">(</mo><mrow><msub data-latex="C_y"><mi data-latex="C">C</mi><mi data-latex="y">y</mi></msub><mo data-latex="-">−</mo><msub data-latex="P_y"><mi data-latex="P">P</mi><mi data-latex="y">y</mi></msub></mrow><mo data-latex=")" stretchy="false">)</mo></mrow></mrow></mrow><mrow data-latex="(B_x - A_x)(C_y - A_y) - (C_x - A_x)(B_y - A_y)"><mrow><mrow><mo data-latex="(" stretchy="false">(</mo><mrow><msub data-latex="B_x"><mi data-latex="B">B</mi><mi data-latex="x">x</mi></msub><mo data-latex="-">−</mo><msub data-latex="A_x"><mi data-latex="A">A</mi><mi data-latex="x">x</mi></msub></mrow><mo data-latex=")" stretchy="false">)</mo></mrow><mo>⁢</mo><mrow><mo data-latex="(" stretchy="false">(</mo><mrow><msub data-latex="C_y"><mi data-latex="C">C</mi><mi data-latex="y">y</mi></msub><mo data-latex="-">−</mo><msub data-latex="A_y"><mi data-latex="A">A</mi><mi data-latex="y">y</mi></msub></mrow><mo data-latex=")" stretchy="false">)</mo></mrow></mrow><mo data-latex="-">−</mo><mrow><mrow><mo data-latex="(" stretchy="false">(</mo><mrow><msub data-latex="C_x"><mi data-latex="C">C</mi><mi data-latex="x">x</mi></msub><mo data-latex="-">−</mo><msub data-latex="A_x"><mi data-latex="A">A</mi><mi data-latex="x">x</mi></msub></mrow><mo data-latex=")" stretchy="false">)</mo></mrow><mo>⁢</mo><mrow><mo data-latex="(" stretchy="false">(</mo><mrow><msub data-latex="B_y"><mi data-latex="B">B</mi><mi data-latex="y">y</mi></msub><mo data-latex="-">−</mo><msub data-latex="A_y"><mi data-latex="A">A</mi><mi data-latex="y">y</mi></msub></mrow><mo data-latex=")" stretchy="false">)</mo></mrow></mrow></mrow></mfrac></math></p>
                    <p><math xmlns="http://www.w3.org/1998/Math/MathML" data-latex="\gamma=\frac{P_{PAB}}{P_{ABC}}=\frac{(A_x - P_x)(B_y - P_y) - (Bx - P_x)(A_y - P_y)}{(B_x - A_x)(C_y - A_y) - (C_x - A_x)(B_y - A_y)}" display="block"><mi data-latex="\gamma">γ</mi><mo data-latex="=">=</mo><mfrac data-latex="\frac{P_{PAB}}{P_{ABC}}"><msub data-latex="P_{PAB}"><mi data-latex="P">P</mi><mrow data-mjx-texclass="ORD" data-latex="{P A B}"><mi data-latex="P">P</mi><mo>⁢</mo><mi data-latex="A">A</mi><mo>⁢</mo><mi data-latex="B">B</mi></mrow></msub><msub data-latex="P_{ABC}"><mi data-latex="P">P</mi><mrow data-mjx-texclass="ORD" data-latex="{A B C}"><mi data-latex="A">A</mi><mo>⁢</mo><mi data-latex="B">B</mi><mo>⁢</mo><mi data-latex="C">C</mi></mrow></msub></mfrac><mo data-latex="=">=</mo><mfrac data-latex="\frac{(A_x - P_x)(B_y - P_y) - (Bx - P_x)(A_y - P_y)}{(B_x - A_x)(C_y - A_y) - (C_x - A_x)(B_y - A_y)}"><mrow data-latex="(A_x - P_x)(B_y - P_y) - (Bx - P_x)(A_y - P_y)"><mrow><mrow><mo data-latex="(" stretchy="false">(</mo><mrow><msub data-latex="A_x"><mi data-latex="A">A</mi><mi data-latex="x">x</mi></msub><mo data-latex="-">−</mo><msub data-latex="P_x"><mi data-latex="P">P</mi><mi data-latex="x">x</mi></msub></mrow><mo data-latex=")" stretchy="false">)</mo></mrow><mo>⁢</mo><mrow><mo data-latex="(" stretchy="false">(</mo><mrow><msub data-latex="B_y"><mi data-latex="B">B</mi><mi data-latex="y">y</mi></msub><mo data-latex="-">−</mo><msub data-latex="P_y"><mi data-latex="P">P</mi><mi data-latex="y">y</mi></msub></mrow><mo data-latex=")" stretchy="false">)</mo></mrow></mrow><mo data-latex="-">−</mo><mrow><mrow><mo data-latex="(" stretchy="false">(</mo><mrow><mrow><mi data-latex="B">B</mi><mo>⁢</mo><mi data-latex="x">x</mi></mrow><mo data-latex="-">−</mo><msub data-latex="P_x"><mi data-latex="P">P</mi><mi data-latex="x">x</mi></msub></mrow><mo data-latex=")" stretchy="false">)</mo></mrow><mo>⁢</mo><mrow><mo data-latex="(" stretchy="false">(</mo><mrow><msub data-latex="A_y"><mi data-latex="A">A</mi><mi data-latex="y">y</mi></msub><mo data-latex="-">−</mo><msub data-latex="P_y"><mi data-latex="P">P</mi><mi data-latex="y">y</mi></msub></mrow><mo data-latex=")" stretchy="false">)</mo></mrow></mrow></mrow><mrow data-latex="(B_x - A_x)(C_y - A_y) - (C_x - A_x)(B_y - A_y)"><mrow><mrow><mo data-latex="(" stretchy="false">(</mo><mrow><msub data-latex="B_x"><mi data-latex="B">B</mi><mi data-latex="x">x</mi></msub><mo data-latex="-">−</mo><msub data-latex="A_x"><mi data-latex="A">A</mi><mi data-latex="x">x</mi></msub></mrow><mo data-latex=")" stretchy="false">)</mo></mrow><mo>⁢</mo><mrow><mo data-latex="(" stretchy="false">(</mo><mrow><msub data-latex="C_y"><mi data-latex="C">C</mi><mi data-latex="y">y</mi></msub><mo data-latex="-">−</mo><msub data-latex="A_y"><mi data-latex="A">A</mi><mi data-latex="y">y</mi></msub></mrow><mo data-latex=")" stretchy="false">)</mo></mrow></mrow><mo data-latex="-">−</mo><mrow><mrow><mo data-latex="(" stretchy="false">(</mo><mrow><msub data-latex="C_x"><mi data-latex="C">C</mi><mi data-latex="x">x</mi></msub><mo data-latex="-">−</mo><msub data-latex="A_x"><mi data-latex="A">A</mi><mi data-latex="x">x</mi></msub></mrow><mo data-latex=")" stretchy="false">)</mo></mrow><mo>⁢</mo><mrow><mo data-latex="(" stretchy="false">(</mo><mrow><msub data-latex="B_y"><mi data-latex="B">B</mi><mi data-latex="y">y</mi></msub><mo data-latex="-">−</mo><msub data-latex="A_y"><mi data-latex="A">A</mi><mi data-latex="y">y</mi></msub></mrow><mo data-latex=")" stretchy="false">)</mo></mrow></mrow></mrow></mfrac></math></p>
                    <p>Współrzędne barycentryczne są często zapisywane w uproszczonej formie jako (𝑢, 𝑣) = (α, β). Wartość γ można odtworzyć z uproszczonej formy korzystając ze wzoru γ = 𝟣 - 𝑢 - 𝑣.</p>
                    <p>W opisywanej implementacji funkcjonalność ta została zaimplementowana w klasie <a class="repository-file" href="https://github.com/pawel-stepnowski/rendering/tree/main/js/math/BarycentricCoordinates.js"><i class="fa fa-file-o" aria-hidden="true"></i><span>BarycentricCoordinates.js</span></a>. Kod ten pozwala na obliczanie współrzędnych barycentrycznych dla dowolnego punktu wewnątrz trójkąta i wykorzystywanie ich do interpolacji wartości.</p>
                </section>
                <section id="triangle_rasterization__traversal">
                    <h3>Trawersowanie trójkąta</h3>
                    <p>Trawersowanie trójkąta (triangle traversal) to proces iteracyjnego przechodzenia przez wszystkie piksele, które znajdują się wewnątrz obszaru wyznaczonego przez trójkąt. Jest to jeden z kluczowych etapów rasteryzacji, ponieważ w jego trakcie określa się, które piksele na ekranie mają zostać wypełnione wartościami.</p>
                    <p>W opisywanej implementacji stosowany jest prosty algorytm trawersowania, który składa się z następujących kroków:</p>
                    <ul>
                        <li><span style="font-weight: 500;">Wyznaczenie prostokąta opisującego trójkąt.</span> Prostokąt opisujący (bounding box) to najmniejszy prostokąt obejmujący wszystkie wierzchołki trójkąta. Wyznaczenie tego prostokąta pozwala ograniczyć obszar sprawdzania pikseli i optymalizuje działanie algorytmu.</li>
                        <li><span style="font-weight: 500;">Sprawdzanie pikseli wewnątrz prostokąta.</span> Dla każdego piksela w prostokącie sprawdzane jest, czy znajduje się on wewnątrz trójkąta. Weryfikacja odbywa się za pomocą współrzędnych barycentrycznych.</li>
                    </ul>
                    <p>Opisany algorytm został zaimplementowany w klasie <a class="repository-file" href="https://github.com/pawel-stepnowski/rendering/tree/main/js/TriangleTraversal.js"><i class="fa fa-file-o" aria-hidden="true"></i><span>TriangleTraversal.js</span></a>.</p>
                </section>
                <section id="triangle_rasterization__example">
                    <h3>Przykład rasteryzacji</h3>
                    <p>Poniżej przedstawiono kod przykładowego programu, który renderuje trójkąt przy użyciu klasy <code>TriangleTraversal</code>:</p>
                    <div class="code-with-output">
                        <div class="content-generated-from-code" module="triangle_rasterization" function="rasterizationExample" output=":parent canvas" style="height: 22em;"></div>
                        <div><canvas width="400" height="400"></canvas></div>
                    </div>
                </section>
            </section>
            <hr>
            <section id="rendering">
                <h2>Proces renderowania</h2>
                <p>W tym rozdziale zostanie połączona wiedza zdobyta w poprzednich częściach w jeden proces renderowania, obejmujący transformacje wierzchołków, rasteryzację i wypełnianie pikseli kolorem.</p>
                <section id="rendering__description">
                    <h3>Opis procesu</h3>
                    <section id="rendering__description__parameters">
                        <h4>Parametry procesu</h4>
                        <p>Proces renderowania można podsumować następująco:</p>
                        <ul>
                            <li><span style="font-weight: 500;">Dane wejściowe</span> które obejmują współrzędne (𝑥, 𝑦, 𝑧) wszystkich trójkątów oraz ich atrybuty, takie jak kolor. Pozycja (𝑥, 𝑦, 𝑧) jest wyróżnionym atrybutem, ponieważ jest obowiązkowa.</li>
                            <li>
                                <span style="font-weight: 500;">Parametry procesu renderowania</span>
                                <ul>
                                    <li>
                                        <span>Funkcja <code>vertexShader</code> wykonywana jest dla każdego wierzchołka i odpowiada za:</span>
                                        <ul>
                                            <li>Przekształcenie współrzędnych wierzchołka do przestrzeni jednorodnej (homogeneous space).</li>
                                            <li>Przygotowanie zestawu atrybutów dla funkcji <code>fragmentShader</code>.</li>
                                        </ul>
                                    </li>
                                    <li>Funkcja <code>fragmentShader</code> wykonywana jest dla każdego piksela należącego do trójkąta. Jej zadaniem jest obliczenie koloru piksela.</li>
                                    <li>Struktura <code>Uniforms</code> zawiera stałe dane wejściowe wspólne dla wszystkich wierzchołków i pikseli.</li>
                                </ul>
                        </li></ul>
                        <p>Proces renderowania został zaimplementowany w klasie <code>Renderer</code>, której konstruktor przyjmuje dwie funkcje:</p>
                        <ul>
                            <li><code>vertexShader(uniforms, input, output)</code></li>
                            <li><code>fragmentShader(uniforms, input, output)</code></li>
                        </ul>
                        <p>Metoda <code>draw(data)</code> klasy <code>Renderer</code> odpowiada ze przebieg procesu renderowania, wykorzystując przekazane w konstruktorze funkcje <code>vertexShader</code> i <code>fragmentShader</code>.</p>
                    </section>
                    <section id="rendering__description__flow">
                        <h4>Przebieg procesu</h4>
                        <p>Dla każdego trójkąta (składającego się z trzech wierzchołków) metoda <code>draw</code> wykonuje następujące kroki:</p>
                        <ul>
                            <li>
                                <span style="font-weight: 500;">Transformacja wierzchołków</span>
                                <ul>
                                    <li>Dla każdego z trzech wierzchołków wywoływana jest funkcja <code>vertexShader</code>.</li>
                                    <li>
                                        <span>Funkcja ta przetwarza atrybuty wierzchołka i zwraca:</span>
                                        <ul>
                                            <li>Współrzędne jednorodne wierzchołka.</li>
                                            <li>Zestaw atrybutów potrzebnych funkcji <code>fragmentShader</code>.</li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <span style="font-weight: 500;">Rasteryzacja trójkąta</span>
                                <ul>
                                    <li>Na podstawie trzech wierzchołków trójkąta wykonywany jest opisany wcześniej algorytm rasteryzacji.</li>
                                    <li>
                                        <span>Dla każdego piksela należącego do trójkąta:</span>
                                        <ul>
                                            <li>Wyznaczane są zinterpolowane atrybuty na podstawie atrybutów wierzchołków.</li>
                                            <li>Wywoływana jest funkcja <code>fragmentShader</code>, która na podstawie atrybutów piksela oblicza jego kolor.</li>
                                            <li>Obliczony kolor jest zapisywany w obrazie wyjściowym.</li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                        <p>Kod metody <code>draw</code> odpowiedzialnej za proces renderowania:</p>
                        <div class="content-generated-from-code" module="renderer" function="Renderer.draw" style="height: 87em;"></div>
                    </section>
                </section>
                <section id="rendering__case">
                    <h3>Przykład użycia</h3>
                    <section id="rendering__case__input">
                        <h4>Dane wejściowe</h4>
                        <div>Dane wejściowe są indeksowane i składają się z:</div>
                        <ul>
                            <li><span style="font-weight: 500;">Atrybuty wierzchołków</span>. Tablice zawierające współrzędne oraz dodatkowe dane, takie jak kolory.</li>
                            <li><span style="font-weight: 500;">Indeks (index buffer)</span>. Tablica określająca, które wierzchołki tworzą trójkąty.</li>
                        </ul>
                        <p>Poniżej znajduje się ilustracja przedstawiająca zbiór danych indeksowanych. Znajdują się na niej:
                             V to tablica zawierająca n atrybutów współrzędnych w przestrzeni. C to tablica zawierająca n atrybutów koloru. I to tablica będąca indeksem, która łączy trójki każdego z atrybutów w atrybuty jednego trójkąta. Indeks może używać tego samego atrybutu wielokrotnie dla różnych trójkątów.</p>
                        <ul>
                            <li>𝖵 – tablica współrzędnych (𝑥, 𝑦, 𝑧).</li>
                            <li>𝖢 – tablica kolorów (𝑟, 𝑔, 𝑏).</li>
                            <li>𝖨 – tablica indeksów łącząca atrybuty w trójkąty.</li>
                        </ul>
                        <img src="images/indexed_data.svg" style="max-height: 15em;">
                        <p>Indeksowanie pozwala na ponowne wykorzystanie tych samych wierzchołków w różnych trójkątach, co redukuje redundancję danych i optymalizuje pamięć. W implementacjach takich jak OpenGL czy DirectX istnieją możliwości tworzenia buforów dla różnych atrybutów o które różnią się rozmiarami i są do pewnego stopnia indeksowane niezależnie.</p>
                        
                        <p>Poniżej predsrtawiono kod funkcji <code>createDrawData</code> przygotowującej przykładowe. Dane te opisują współrzędne trójkąta położonego w środku układu współrzędnych wraz z kolorami wierzchołków. Dane te są indeksowane zgodnie z wymaganiem metody <code>draw</code>. Zmienna <code>data.indices</code> zawiera indeksy trójkąta, którego atrybuty są zapisane w zmiennej <code>data.attributes</code>.</p>
                        <div class="content-generated-from-code" module="rendering" function="createDrawData" style="height: 32em;"></div>
                        <p>W konstruowanym przykładzie powyższe dane są przekazywane do metody <code>draw</code> dwukrotnie, aby wyrenderować dwa trójkąty. Dla każdego z trójkątów zostaną ustawione inne wartości zmiennej <code>uniforms</code>, tak aby wyrenderować je w innym położeniu.</p>
                        <p>Kod funkcji <code>createTriangleTranslations</code> zwracającej macierze przesunięcia dla obu trójkątów:</p>
                        <div class="content-generated-from-code" module="rendering" function="createTriangleTranslations" style="height: 11em;"></div>
                    </section>
                    <section id="rendering__case__uniforms">
                        <h4>Uniforms</h4>
                        <p>Uniforms używane w przykładzie:</p>
                        <ul>
                            <li><code>projection</code> – macierz rzutowania, która przekształca współrzędne w przestrzeń jednorodną.</li>
                            <li><code>view</code> – macierz widoku, przesuwa scenę względem obserwatora.</li>
                            <li><code>model</code> – macierz modelu, odpowiada za lokalne przekształcenie obiektu we własnym układzie współrzędnych. W przykładzie zostanie ona wykorzystana do obrotu trójkąta wokół osi Y.</li>
                        </ul>
                        <p>Kod funkcji <code>createUniforms</code> zwracającej strukturę <code>uniforms</code>:</p>
                        <div class="content-generated-from-code" module="rendering" function="createUniforms" style="height: 17em;"></div>
                    </section>
                    <section id="rendering__case__vertex">
                        <h4>Vertex Shader</h4>
                        <p>Funkcja <code>vertexShader(uniforms, input, output)</code> jest wywoływana dla każdego wierzchołka.</p>
                        <ul>
                            <li>Przekształcenie współrzędnych wierzchołka przez macierze <code>model</code>, <code>view</code> i <code>projection</code>.</li>
                            <li>Przekazanie atrybutów koloru dla funkcji <code>fragmentShader</code>.</li>
                        </ul>
                        <p>Kod funkcji <code>vertexShader</code> dla konstruowanego przykładu:</p>
                        <div class="content-generated-from-code" module="rendering" function="vertexShader" style="height: 21em;"></div>
                    </section>
                    <section id="rendering__case__rasterization">
                        <h4>Rasteryzacja i Fragment Shader</h4>
                        <p>Po wywołaniu funkcji <code>vertexShader</code> dla trzech wierzchołków trójkąta, następuje rasteryzacja. W metodzie <code>draw</code> zastosowanio opisany wcześniej algorytm trawersowania. Dla każdego piksela który należy do trawersowanego trójkąta, wywoływana jest funkcja <code>fragmentShader</code> w celu obliczenia jego koloru. Atrybuty piksela przekazywane do funkcji <code>fragmentShader</code> są wartościami zinterpolowanymi na podstawie wartości otrzymanych od funkcji <code>vertexShader</code>.</p>
                        <p>Kod funkcji <code>fragmentShader</code> dla konstruowanego przykładu:</p>
                        <div class="content-generated-from-code" module="rendering" function="fragmentShader" style="height: 17em;"></div>
                    </section>
                    <section id="rendering__rendering">
                        <h4>Renderowanie</h4>
                        <p>W poprzednich punktach tego rozdziału zostały zdefiniowane przykładowe funkcje <code>vertexShader</code> i <code>fragmentShader</code> oraz struktura <code>uniforms</code>. Pozwala to na skonstruowanie obiektu klasy <code>Renderer</code>, co przedstawia poniższy kod:</p>
                        <div class="content-generated-from-code" module="rendering" function="createRenderer" style="height: 37em;"></div>
                        <p>Zmienne <code>vertex_shader_input_attributes</code> i <code>fragment_shader_input_attributes</code> mają znaczenie czysto techniczne i mają na celu włatwienie metodzie <code>draw</code> konstruowanie struktur danych potrzebnych do obliczeń.</p>
                        <p>Pozostało połączyć przedstawione w poprzednich punktach dane oraz funkcje w główną funkcję renderującą:</p>
                        <div class="code-with-output">
                            <div class="content-generated-from-code" module="rendering" function="render" output=":parent :nth-child(2)" style="height: 30em;"></div>
                            <div></div>
                        </div>
                    </section>
                </section>
            </section>
            <hr>
            <section id="appendix_a">
                <h2>Dodatek A. Demo</h2>
                <p>Umieszczony tutaj przykład zawiera nieco bardziej złożoną scenę oraz tranformacje. Można zauważyć, że bufora Z powoduje że dalsze obiekt mogą przykrywać obiekty bliższe. Doimplementowanie bufora Z jest dość proste i pozostaje jako ćwiczenia dla czytelnika.</p>
                <p>Kod żródłowy tego przykładu znajduje się pod adresem <a href="https://github.com/pawel-stepnowski/rendering/tree/main/js/math/Vector4.js">https://github.com/pawel-stepnowski/rendering/tree/main/js/math/Vector4.js</a>.</p>
                <div id="appendix-a-container" style="display: flex;"></div>
            </section>
            <hr>
            <section id="appendix_b">
                <h2>Dodatek B. WebGL</h2>
                <p>Dodatek ten ma na celu przedstawienie podobieństwa procesu renderowania w WebGL do tego który został opisany w tym artykule.</p>
                <p>Kod źródłowy TODO</p>
                <div id="appendix-b-container" style="display: flex;"></div>
            </section>
            <hr>
            <div style="text-align: right; margin-bottom: 1em;">© 2024 Paweł Stepnowski</div>
        </article>
    </main>
</body></html>